(function(){'use strict';const ca=["DEBUG","INFO","WARN","ERROR"];var ea="main",fa=null;function ja(a,b,d){if(!(1>a)){var c="EagRuntimeJS: ["+(new Date).toLocaleTimeString()+"]["+ea+"/"+(ca[a]||"UNKNOWN")+"] ";a:{if(0<d.length){for(var k=[],l=0;l<d.length;++l){var t=b.indexOf("{}");if(-1!=t)k.push(b.substring(0,t)),k.push(d[l]),b=b.substring(t+2);else break}if(0<k.length){k.push(b);d=k.join("");break a}}d=b}b=c+d;3<=a?console.error(b):console.log(b);fa&&fa(b,3<=a)}}function e(a,...b){ja(1,a,b)}
function ka(a,...b){ja(2,a,b)}function h(a,...b){ja(3,a,b)}function la(a,b){if(b){if(b.message?ja(3,'{}: {} - "{}"',[a,b.name,b.message]):ja(3,"{}: {}",[a,b.name]),"string"===typeof b.stack)for(b=ma(b.stack),a=0;a<b.length;++a)ja(3,"    at "+b[a],[])}else ja(3,"{}: <null>",[a])}function oa(a){return function(){h("Unsupported function called: {}.{}",a);return 0}}function C(a,b){a[b]=oa(b)}function qa(a){return new Promise(function(b){setTimeout(b,a)})}
class ra{constructor(){this.G=this.o=null;this.u=0}K(){return this.u}push(a){this.G&&(this.G._next=a);this.G=a;this.o||(this.o=a);++this.u}j(){if(this.o){const a=this.o;(this.o=a._next||null)?a._next=null:this.G=null;--this.u;return a}return null}};var sa={},I={},va={},xa={},ya={},J={},za={},K={},Aa={},Ca={},Da={},N={},Ea={},Fa={},Ia={},Ja=null,Ka=null,La=null,Ma=null,Na=null,Oa=null,Pa=null,Sa=null,O=null,Ta=null,Ua=null,Q=null,R=null,Va=null,Wa=!1,Xa=0,Ya=null,Za=!1,$a=null,ab=null,cb=!1;const db=[];var eb=null,fb="_eaglercraftX",gb=!1,hb=!1,ib=!1,jb=!0,kb=!1,lb=!1,Gb=!0,Hb=!0,Ib=!1;
function Jb(){"string"===typeof O.localStorageNamespace&&(fb=O.localStorageNamespace);"boolean"===typeof O.openDebugConsoleOnLaunch&&(gb=O.openDebugConsoleOnLaunch);"boolean"===typeof O.fixDebugConsoleUnloadListener&&(hb=O.fixDebugConsoleUnloadListener);"boolean"===typeof O.forceWebViewSupport&&(ib=O.forceWebViewSupport);"boolean"===typeof O.enableWebViewCSP&&(jb=O.enableWebViewCSP);"boolean"===typeof O.forceWebGL1&&(kb=O.forceWebGL1);"boolean"===typeof O.forceWebGL2&&(lb=O.forceWebGL2);"boolean"===
typeof O.allowExperimentalWebGL1&&(Gb=O.allowExperimentalWebGL1);"boolean"===typeof O.useWebGLExt&&(Hb=O.useWebGLExt);"boolean"===typeof O.useDelayOnSwap&&(Ib=O.useDelayOnSwap)}
async function Kb(){function a(){try{k=new AudioContext}catch(t){la("Could not initialize audio context",t)}}Jb();fa=Lb;"yes"!==window.__isEaglerX188UnloadListenerSet&&(window.onbeforeunload=function(){window.__curEaglerX188UnloadListenerCB&&window.__curEaglerX188UnloadListenerCB();return!1},window.__isEaglerX188UnloadListenerSet="yes");e("Initializing EagRuntime JS context...");await Mb();Nb();Ob();Pb();Qb();Rb();Sb();C(Ia,"sendPacket");C(Ia,"getAvailablePackets");C(Ia,"getNextPacket");C(Ia,"setCrashCallback");
C(Ia,"isTabAboutToClose");Ua.classList.add("_eaglercraftX_root_element");Ua.style.overflow="hidden";for(var b=null,d;d=Ua.lastChild;)b||=d,Ua.removeChild(d);Q=document.createElement("div");Q.classList.add("_eaglercraftX_wrapper_element");Q.style.position="relative";Q.style.width="100%";Q.style.height="100%";Q.style.overflow="hidden";Q.style.backgroundColor="black";Ua.appendChild(Q);b&&(b.style.position="absolute",b.style.top="0px",b.style.left="0px",b.style.right="0px",b.style.bottom="0px",b.style.zIndex=
"2",b.classList.add("_eaglercraftX_early_splash_element"),Q.appendChild(b));await qa(10);d=window.devicePixelRatio;b=d*Q.clientWidth|0;d=d*Q.clientHeight|0;e("Initializing audio context");if("function"===typeof document.exitPointerLock){var c=navigator.userAgent;null!==c?(c=c.toLowerCase(),Za=-1!==c.indexOf("mobi")||-1!==c.indexOf("tablet")):Za=!1}else Za=!0;var k=null;!Za&&navigator.userActivation&&navigator.userActivation.hasBeenActive?a():(c=document.createElement("div"),c.classList.add("_eaglercraftX_press_any_key_image"),
c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.right="0px",c.style.bottom="0px",c.style.width="100%",c.style.height="100%",c.style.zIndex="3",c.style.touchAction="pan-x pan-y",c.style.background='center / contain no-repeat url("'+Oa+'"), left / 1000000% 100% no-repeat url("'+Oa+'") white',c.style.setProperty("image-rendering","pixelated"),Q.appendChild(c),await new Promise(function(t,G){function x(){if(!z){z=!0;Za?Q.removeChild(B):(window.removeEventListener("keydown",x),
Q.removeEventListener("mousedown",x),Q.removeEventListener("touchstart",x));try{a()}catch(H){G(H);return}t()}}var z=!1;if(Za){var B=document.createElement("div");B.classList.add("_eaglercraftX_mobile_press_any_key");B.setAttribute("style","position:absolute;background-color:white;font-family:sans-serif;top:10%;left:10%;right:10%;bottom:10%;border:5px double black;padding:calc(5px + 7vh) 15px;text-align:center;font-size:20px;user-select:none;z-index:10;");B.innerHTML='<h3 style="margin-block-start:0px;margin-block-end:0px;margin:20px 5px;">Mobile Browser Detected</h3><p style="margin-block-start:0px;margin-block-end:0px;margin:20px 5px;">Warning: EaglercraftX WASM-GC requires a lot of memory and may not be stable on most mobile devices!</p><p style="margin-block-start:0px;margin-block-end:0px;margin:20px 2px;"><button style="font: 24px sans-serif;font-weight:bold;" class="_eaglercraftX_mobile_launch_client">Launch EaglercraftX</button></p><p style="margin-block-start:0px;margin-block-end:0px;margin:25px 5px;">(Tablets and phones with large screens work best)</p>';
B.querySelector("._eaglercraftX_mobile_launch_client").addEventListener("click",x);Q.appendChild(B)}else window.addEventListener("keydown",x),Q.addEventListener("mousedown",x),Q.addEventListener("touchstart",x)}),Q.removeChild(c));k?Tb(k):Ub();e("Creating main canvas");R=document.createElement("canvas");R.classList.add("_eaglercraftX_canvas_element");R.style.width="100%";R.style.height="100%";R.style.zIndex="1";R.style.touchAction="pan-x pan-y";R.style.setProperty("-webkit-touch-callout","none");
R.style.setProperty("-webkit-tap-highlight-color","rgba(255, 255, 255, 0)");R.style.setProperty("image-rendering","pixelated");R.width=b;R.height=d;Q.appendChild(R);await Vb();e("Creating WebGL context");Q.addEventListener("webglcontextcreationerror",function(t){h("[WebGL Error]: {}",t.statusMessage)});b={antialias:!1,depth:!1,powerPreference:"high-performance",desynchronized:!0,preserveDrawingBuffer:!1,premultipliedAlpha:!1,alpha:!1};c=!1;if(lb){e("Note: Forcing WebGL 2.0 context");d=300;var l=R.getContext("webgl2",
b);if(!l)return Wb("WebGL 2.0 is not supported on this device!"),!1}else if(kb){if(e("Note: Forcing WebGL 1.0 context"),d=200,l=R.getContext("webgl",b),!l)if(Gb){if(c=!0,l=R.getContext("experimental-webgl",b),!l)return Wb("WebGL is not supported on this device!"),!1}else return Wb("WebGL is not supported on this device!"),!1}else if(d=300,l=R.getContext("webgl2",b),!l&&(d=200,l=R.getContext("webgl",b),!l))if(Gb){if(c=!0,l=R.getContext("experimental-webgl",b),!l)return Wb("WebGL is not supported on this device!"),
!1}else return Wb("WebGL is not supported on this device!"),!1;c&&alert('WARNING: Detected "experimental" WebGL 1.0 support, certain graphics API features may be missing, and therefore EaglercraftX may malfunction and crash!');Xa=d;Va=l;Wa=c;Xb(l,d);e("OpenGL Version: {}",K.glGetString(7938));e("OpenGL Renderer: {}",K.glGetString(7937));b=K.dumpActiveExtensions();if(0===b.length)e("Unlocked the following OpenGL ES extensions: (NONE)");else for(b.sort(),e("Unlocked the following OpenGL ES extensions:"),
d=0;d<b.length;++d)e(" - {}",b[d]);K.glClearColor(0,0,0,1);K.glClear(16384);await qa(20);e("EagRuntime JS context initialization complete");return!0}
async function Yb(){Jb();fa=function(a,b){postMessage({ch:"~!LOGGER",txt:a,err:b})};e("Initializing EagRuntime worker JS context...");await Mb();C(I,"setClipboard");C(I,"getClipboard");C(I,"displayFileChooser");C(I,"fileChooserHasResult");C(I,"getFileChooserResult");C(I,"clearFileChooserResult");C(I,"downloadFileWithNameU8");C(I,"downloadFileWithNameA");C(I,"downloadScreenshot");C(I,"showDebugConsole");C(I,"addLogMessage");C(I,"isShowingDebugConsole");C(I,"getFaviconURL");Ub();C(J,"keyboardLayoutSupported");
C(J,"iterateKeyboardLayout");C(J,"updateCanvasSize");C(J,"updatePlatformAndSleep");C(J,"isVSyncSupported");C(J,"mouseSetGrabbed");C(J,"isMouseGrabSupported");C(J,"isMouseGrabbed");C(J,"isPointerLocked");C(J,"supportsFullscreen");C(J,"toggleFullscreen");C(J,"isFullscreen");C(J,"touchSetOpenKeyboardZone");C(J,"touchCloseDeviceKeyboard");C(J,"touchIsDeviceKeyboardOpenMAYBE");C(J,"gamepadSupported");C(J,"isVisualViewport");C(K,"getCapBits");C(K,"glEnable");C(K,"glDisable");C(K,"glClearColor");C(K,"glClearDepth");
C(K,"glClear");C(K,"glDepthFunc");C(K,"glDepthMask");C(K,"glCullFace");C(K,"glViewport");C(K,"glBlendFunc");C(K,"glBlendFuncSeparate");C(K,"glBlendEquation");C(K,"glBlendColor");C(K,"glColorMask");C(K,"glDrawBuffers");C(K,"glReadBuffer");C(K,"glReadPixels");C(K,"glPolygonOffset");C(K,"glLineWidth");C(K,"glGenBuffers");C(K,"glGenTextures");C(K,"glCreateProgram");C(K,"glCreateShader");C(K,"glCreateFramebuffer");C(K,"glCreateRenderbuffer");C(K,"glGenQueries");C(K,"glDeleteBuffers");C(K,"glDeleteTextures");
C(K,"glDeleteProgram");C(K,"glDeleteShader");C(K,"glDeleteFramebuffer");C(K,"glDeleteRenderbuffer");C(K,"glDeleteQueries");C(K,"glBindBuffer");C(K,"glBufferData");C(K,"glBufferSubData");C(K,"glEnableVertexAttribArray");C(K,"glDisableVertexAttribArray");C(K,"glVertexAttribPointer");C(K,"glActiveTexture");C(K,"glBindTexture");C(K,"glTexParameterf");C(K,"glTexParameteri");C(K,"glTexImage3D");C(K,"glTexImage2D");C(K,"glTexSubImage2D");C(K,"glCopyTexSubImage2D");C(K,"glTexStorage2D");C(K,"glPixelStorei");
C(K,"glGenerateMipmap");C(K,"glShaderSource");C(K,"glCompileShader");C(K,"glGetShaderi");C(K,"glGetShaderInfoLog");C(K,"glUseProgram");C(K,"glAttachShader");C(K,"glDetachShader");C(K,"glLinkProgram");C(K,"glGetProgrami");C(K,"glGetProgramInfoLog");C(K,"glDrawArrays");C(K,"glDrawElements");C(K,"glBindAttribLocation");C(K,"glGetAttribLocation");C(K,"glGetUniformLocation");C(K,"glGetUniformBlockIndex");C(K,"glBindBufferRange");C(K,"glUniformBlockBinding");C(K,"glUniform1f");C(K,"glUniform2f");C(K,"glUniform3f");
C(K,"glUniform4f");C(K,"glUniform1i");C(K,"glUniform2i");C(K,"glUniform3i");C(K,"glUniform4i");C(K,"glUniformMatrix2fv");C(K,"glUniformMatrix3fv");C(K,"glUniformMatrix4fv");C(K,"glUniformMatrix3x2fv");C(K,"glUniformMatrix4x2fv");C(K,"glUniformMatrix4x3fv");C(K,"glBindFramebuffer");C(K,"glCheckFramebufferStatus");C(K,"glBlitFramebuffer");C(K,"glRenderbufferStorage");C(K,"glFramebufferTexture2D");C(K,"glFramebufferTextureLayer");C(K,"glBindRenderbuffer");C(K,"glFramebufferRenderbuffer");C(K,"glGetInteger");
C(K,"glGetError");C(K,"getAllExtensions");C(K,"dumpActiveExtensions");C(K,"glGetString");C(K,"glGenVertexArrays");C(K,"glDeleteVertexArrays");C(K,"glBindVertexArray");C(K,"glVertexAttribDivisor");C(K,"glDrawArraysInstanced");C(K,"glDrawElementsInstanced");C(K,"isContextLost");C(Ca,"getMic");C(Ca,"setDataAvailableHandler");C(Da,"isSupported");C(Da,"createRTCPeerConnection");C(N,"supported");C(N,"clientLANReadyState");C(N,"clientLANCloseConnection");C(N,"clientLANSendPacket");C(N,"clientLANReadPacket");
C(N,"clientLANAvailable");C(N,"clientLANSetICEServersAndConnect");C(N,"clearLANClientState");C(N,"clientLANAwaitICECandidate");C(N,"clientLANAwaitDescription");C(N,"clientLANAwaitChannel");C(N,"clientLANClosed");C(N,"clientLANSetICECandidate");C(N,"clientLANSetDescription");C(N,"clientLANClosed");C(N,"serverLANInitializeServer");C(N,"serverLANCloseServer");C(N,"serverLANCreatePeer");C(Ea,"checkSupported");C(Ea,"checkCSPSupported");C(Ea,"sendStringMessage");C(Ea,"sendBinaryMessage");C(Ea,"beginShowing");
C(Ea,"resize");C(Ea,"endShowing");C(Fa,"startIntegratedServer");C(Fa,"sendPacket");C(Fa,"getAvailablePackets");C(Fa,"getNextPacket");C(Fa,"killWorker");C(Fa,"showCrashReportOverlay");C(Fa,"hideCrashReportOverlay");Zb();e("EagRuntime worker JS context initialization complete")}
function $b(a){Ya=a.buffer;e("WebAssembly direct memory resized to {} MiB",.01*(Ya.byteLength/1024/10.24|0));new Uint8Array(Ya);new Int8Array(Ya);new Uint16Array(Ya);new Int16Array(Ya);new Uint32Array(Ya);new Int32Array(Ya);new Float32Array(Ya)}const ac=new ra;function U(a,b,d){ac.push({eventType:a<<5|b,eventObj:d,_next:null})}let bc=/.+:wasm-function\[[0-9]+]:0x([0-9a-f]+).*/;
function ma(a){if(!a)return null;const b=[];for(let d of a.split("\n")){if(Ma&&(a=bc.exec(d),null!==a&&2<=a.length&&(a=parseInt(a[1],16),!isNaN(a))))try{const c=Ma([a]);if(0<c.length){for(let k of c)b.push(""+k.className+"."+k.method+"("+k.file+":"+k.line+")");continue}}catch(c){}d=d.trim();d.startsWith("at ")&&(d=d.substring(3));b.push(d)}return b}
function cc(a){const b=a?ma(a.stack):null;a="Native Browser Exception\n----------------------------------\n  Line: "+(a&&"string"===typeof a.fileName?a.fileName:"unknown")+":"+(a&&"number"===typeof a.lineNumber?a.lineNumber:"unknown")+":"+(a&&"number"===typeof a.columnNumber?a.columnNumber:"unknown")+"\n  Type: "+(a&&"string"===typeof a.name?a.name:"unknown")+"\n  Desc: "+(a&&"string"===typeof a.message?a.message:"null")+"\n----------------------------------\n\nDeobfuscated stack trace:\n    at "+
(b?b.join("\n    at "):"null")+"\n\nThis exception was not handled by the WASM binary\n";if("undefined"!==typeof window)dc(a,!0);else if(ec){h("\n{}",a);try{ec(a,!0)}catch(d){console.log(d)}}else h("\n{}",a)}
function dc(a,b){h("Game crashed!");var d="Game Crashed! I have fallen and I can't get up!\n\n"+a+"\n\n",c='eaglercraft.version = "'+db[0]+'"\neaglercraft.minecraft = "'+db[2]+'"\neaglercraft.brand = "'+db[1]+'"\n\n'+fc()+"\nwindow.eaglercraftXOpts = "+JSON.stringify(O)+"\n\ncurrentTime = "+(new Date).toLocaleString()+"\n\n"+gc("userAgent")+gc("vendor")+gc("language")+gc("hardwareConcurrency")+gc("deviceMemory")+gc("platform")+gc("product")+hc()+"\n"+ic("localStorage")+ic("sessionStorage")+ic("indexedDB")+
"\nrootElement.clientWidth = "+(Q?Q.clientWidth:"undefined")+"\nrootElement.clientHeight = "+(Q?Q.clientHeight:"undefined")+"\n"+ic("innerWidth")+ic("innerHeight")+ic("outerWidth")+ic("outerHeight")+ic("devicePixelRatio")+jc("availWidth")+jc("availHeight")+jc("colorDepth")+jc("pixelDepth")+"\n"+kc()+"\n",k=d+c;const l=[];try{"object"===typeof O&&"object"===typeof O.hooks&&"function"===typeof O.hooks.crashReportShow&&O.hooks.crashReportShow(k,function(t){l.push(t)})}catch(t){la("Uncaught exception invoking crash report hook",
t)}if(cb){h("");h("An additional crash report was supressed:");k=a.split(/[\r\n]+/);for(a=0;a<k.length;++a)h("  {}",k[a]);if(0<l.length)for(a=0;a<l.length;++a)if(k=l[a]){h("");h("  ----------[ CRASH HOOK ]----------");k=k.split(/[\r\n]+/);for(a=0;a<k.length;++a)h("  {}",k[a]);h("  ----------------------------------")}}else{cb=!0;if(0<l.length){k=d+"Got the following messages from the crash report hook registered in eaglercraftXOpts:\n\n";for(a=0;a<l.length;++a)k+="----------[ CRASH HOOK ]----------\n"+
l[a]+"\n----------------------------------\n\n";k+=c}(c=Q||Ua)?(b&&h("\n{}",k),b=document.createElement("img"),a=document.createElement("div"),b.setAttribute("style","z-index:100;position:absolute;top:10px;left:calc(50% - 151px);"),b.src=Pa,a.setAttribute("style","z-index:100;position:absolute;top:135px;left:10%;right:10%;bottom:50px;background-color:white;border:1px solid #cccccc;overflow-x:hidden;overflow-y:scroll;overflow-wrap:break-word;white-space:pre-wrap;font: 14px monospace;padding:10px;"),
a.classList.add("_eaglercraftX_crash_element"),c.appendChild(b),c.appendChild(a),a.appendChild(document.createTextNode(k)),eb&&eb(),window.__curEaglerX188UnloadListenerCB=null):(alert("Root element not found, crash report was printed to console"),h("\n{}",k))}}
function Wb(a){if(!cb){cb=!0;var b=Q||Ua;h("Compatibility error: {}",a);if(b){var d=document.createElement("img"),c=document.createElement("div");d.setAttribute("style","z-index:100;position:absolute;top:10px;left:calc(50% - 151px);");d.src=Pa;c.setAttribute("style","z-index:100;position:absolute;top:135px;left:10%;right:10%;bottom:50px;background-color:white;border:1px solid #cccccc;overflow-x:hidden;overflow-y:scroll;font:18px sans-serif;padding:40px;");c.classList.add("_eaglercraftX_incompatible_element");
b.appendChild(d);b.appendChild(c);c.innerHTML='<h2><svg style="vertical-align:middle;margin:0px 16px 8px 8px;" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none"><path stroke="#000000" stroke-width="3" stroke-linecap="square" d="M1.5 8.5v34h45v-28m-3-3h-10v-3m-3-3h-10m15 6h-18v-3m-3-3h-10"/><path stroke="#000000" stroke-width="2" stroke-linecap="square" d="M12 21h0m0 4h0m4 0h0m0-4h0m-2 2h0m20-2h0m0 4h0m4 0h0m0-4h0m-2 2h0"/><path stroke="#000000" stroke-width="2" stroke-linecap="square" d="M20 30h0 m2 2h0 m2 2h0 m2 2h0 m2 -2h0 m2 -2h0 m2 -2h0"/></svg>+ This device is incompatible with Eaglercraft&ensp;:(</h2><div style="margin-left:40px;"><p style="font-size:1.2em;"><b style="font-size:1.1em;">Issue:</b> <span style="color:#BB0000;" id="_eaglercraftX_crashReason"></span><br /></p><p style="margin-left:10px;font:0.9em monospace;" id="_eaglercraftX_crashUserAgent"></p><p style="margin-left:10px;font:0.9em monospace;" id="_eaglercraftX_crashWebGL"></p><p style="margin-left:10px;font:0.9em monospace;">Current Date: '+
(new Date).toLocaleString()+'</p><p><br /><span style="font-size:1.1em;border-bottom:1px dashed #AAAAAA;padding-bottom:5px;">Things you can try:</span></p><ol><li><span style="font-weight:bold;">Just try using Eaglercraft on a different device</span>, it isn\'t a bug it\'s common sense</li><li style="margin-top:7px;">If this screen just appeared randomly, try restarting your browser or device</li><li style="margin-top:7px;">If you are not using Chrome/Edge, try installing the latest Google Chrome</li><li style="margin-top:7px;">If your browser is out of date, please update it to the latest version</li></ol></div>';
c.querySelector("#_eaglercraftX_crashReason").appendChild(document.createTextNode(a));try{var k=window.navigator.userAgent}catch(t){k="<error>"}c.querySelector("#_eaglercraftX_crashUserAgent").appendChild(document.createTextNode(k));eb&&eb();window.__curEaglerX188UnloadListenerCB=null;a="No GL_RENDERER string could be queried";try{const t=document.createElement("canvas");t.width=64;t.height=64;const G=t.getContext("webgl");if(G){if(G.getExtension("WEBGL_debug_renderer_info"))var l=G.getParameter(37446);
else(l=G.getParameter(WebGLRenderingContext.RENDERER))&&(l+=" [masked]");l&&(a=l)}}catch(t){}c.querySelector("#_eaglercraftX_crashWebGL").appendChild(document.createTextNode(a))}else alert("Compatibility error: "+a)}}var lc=null;
function fc(){if(lc)return lc;try{var a=Va,b=Wa;if(!a){b=!1;var d=document.createElement("canvas");d.width=64;d.height=64;a=d.getContext("webgl2");a||(a=d.getContext("webgl"),a||(b=!0,a=d.getContext("experimental-webgl")))}return a?(d="",0<Xa&&(d+="webgl.version = "+a.getParameter(7938)+"\n"),d=a.getExtension("WEBGL_debug_renderer_info")?d+("webgl.renderer = "+a.getParameter(37446)+"\nwebgl.vendor = "+a.getParameter(37445)+"\n"):d+("webgl.renderer = "+a.getParameter(7937)+" [masked]\nwebgl.vendor = "+
a.getParameter(7936)+" [masked]\n"),0<Xa?(d+="\nwebgl.version.id = "+Xa+"\nwebgl.experimental = "+b,200===Xa?d+="\nwebgl.ext.ANGLE_instanced_arrays = "+!!a.getExtension("ANGLE_instanced_arrays")+"\nwebgl.ext.EXT_color_buffer_half_float = "+!!a.getExtension("EXT_color_buffer_half_float")+"\nwebgl.ext.EXT_shader_texture_lod = "+!!a.getExtension("EXT_shader_texture_lod")+"\nwebgl.ext.OES_fbo_render_mipmap = "+!!a.getExtension("OES_fbo_render_mipmap")+"\nwebgl.ext.OES_texture_float = "+!!a.getExtension("OES_texture_float")+
"\nwebgl.ext.OES_texture_half_float = "+!!a.getExtension("OES_texture_half_float")+"\nwebgl.ext.OES_texture_half_float_linear = "+!!a.getExtension("OES_texture_half_float_linear"):300<=Xa&&(d+="\nwebgl.ext.EXT_color_buffer_float = "+!!a.getExtension("EXT_color_buffer_float")+"\nwebgl.ext.EXT_color_buffer_half_float = "+!!a.getExtension("EXT_color_buffer_half_float")+"\nwebgl.ext.OES_texture_float_linear = "+!!a.getExtension("OES_texture_float_linear")),d+="\nwebgl.ext.EXT_texture_filter_anisotropic = "+
!!a.getExtension("EXT_texture_filter_anisotropic")+"\n"):d+="webgl.ext.ANGLE_instanced_arrays = "+!!a.getExtension("ANGLE_instanced_arrays")+"\nwebgl.ext.EXT_color_buffer_float = "+!!a.getExtension("EXT_color_buffer_float")+"\nwebgl.ext.EXT_color_buffer_half_float = "+!!a.getExtension("EXT_color_buffer_half_float")+"\nwebgl.ext.EXT_shader_texture_lod = "+!!a.getExtension("EXT_shader_texture_lod")+"\nwebgl.ext.OES_fbo_render_mipmap = "+!!a.getExtension("OES_fbo_render_mipmap")+"\nwebgl.ext.OES_texture_float = "+
!!a.getExtension("OES_texture_float")+"\nwebgl.ext.OES_texture_float_linear = "+!!a.getExtension("OES_texture_float_linear")+"\nwebgl.ext.OES_texture_half_float = "+!!a.getExtension("OES_texture_half_float")+"\nwebgl.ext.OES_texture_half_float_linear = "+!!a.getExtension("OES_texture_half_float_linear")+"\nwebgl.ext.EXT_texture_filter_anisotropic = "+!!a.getExtension("EXT_texture_filter_anisotropic")+"\n",lc=d):lc="Failed to query GPU info!\n"}catch(c){return lc="ERROR: could not query webgl info - "+
c+"\n"}}function gc(a){try{var b=window.navigator[a]}catch(d){b="<error>"}return"window.navigator."+a+" = "+b+"\n"}function hc(){try{var a=[];if("object"===typeof navigator.plugins){var b=navigator.plugins.length;if(0<b)for(var d=0;d<b;++d){var c=navigator.plugins[d];a.push({name:c.name,filename:c.filename,desc:c.description})}}var k=JSON.stringify(a)}catch(l){k="<error>"}return"window.navigator.plugins = "+k+"\n"}
function jc(a){try{var b=window.screen[a]}catch(d){b="<error>"}return"window.screen."+a+" = "+b+"\n"}function kc(){try{var a=window.location.href}catch(b){a="<error>"}return"window.location.href = "+a+"\n"}function ic(a){try{var b=window[a]}catch(d){b="<error>"}return"window."+a+" = "+b+"\n"};function mc(a,b,d){const c=document.createElement("a");c.style.position="absolute";c.style.left="0px";c.style.top="0px";c.style.zIndex="-100";c.style.color="transparent";c.innerText="Download File";c.href=b;c.target="_blank";c.download=a;Q.appendChild(c);setTimeout(function(){c.click();setTimeout(function(){Q.removeChild(c)},50);d&&setTimeout(d,6E4)},50)}var nc=0,oc=null,pc=null,qc=null,rc=null;
function Lb(a,b){if(qc)rc&&rc(a,b);else for(a={msg:a,err:b,next:null},pc&&(pc.next=a),oc||=a,pc=a,++nc;256<nc;)--nc,oc&&=oc.next}
function Nb(){function a(){t=!1;G=null;null!==z?(Q.removeChild(z),x=z=null):null!==x&&(Q.removeChild(x),x=null)}function b(f){try{window.localStorage&&window.localStorage.setItem(da,f?"true":"false")}catch(r){}}function d(){try{if(window.localStorage){const f=window.localStorage.getItem(da);return f&&"true"===f.toLowerCase()}return!1}catch(f){return!1}}function c(){if(qc)qc.focus();else{var f=Math.round(1E3*window.devicePixelRatio);const r=Math.round(400*window.devicePixelRatio);if(qc=window.open("",
"_blank","top="+Math.round((window.screen.height-r)/2)+",left="+Math.round((window.screen.width-f)/2)+",width="+f+",height="+r+",menubar=0,status=0,titlebar=0,toolbar=0")){qc.focus();B=qc.document;B.write('<!DOCTYPE html><html><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>Debug Console</title><link type="image/png" rel="shortcut icon" href="'+Sa+'" /></head><body style="overflow-x:hidden;overflow-y:scroll;padding:0px;"><p id="loggerMessageContainer" style="overflow-wrap:break-word;white-space:pre-wrap;font:14px monospace;padding:10px;"></p></body></html>');
B.close();H=B.body;W=B.getElementById("loggerMessageContainer");for(f=oc;f;)k(f.msg+"\n",f.err?"#DD0000":"#000000"),f=f.next;pc=oc=null;nc=0;l();f=()=>{null!=qc&&(qc=null,b(!1))};qc.addEventListener("beforeunload",f);qc.addEventListener("unload",f)}else h("Logger popup was blocked!"),window.alert("ERROR: Popup blocked!\n\nPlease make sure you have popups enabled for this site!")}}function k(f,r){var w=B.createElement("span");w.innerText=f;w.style.color=r;W.appendChild(w);for(f=W.children;2048<f.length;)f[0].remove()}
function l(){setTimeout(()=>{qc.scrollTo(0,H.scrollHeight||H.clientHeight)},1)}I.setClipboard=function(f){try{if(window.navigator.clipboard)return window.navigator.clipboard.writeText(f),!0}catch(r){h("Failed to set clipboard data!")}return!1};I.getClipboard=new WebAssembly.Suspending(async function(){var f=null;try{window.navigator.clipboard&&(f=await navigator.clipboard.readText())}catch(r){h("Failed to read clipboard data!")}return f});var t=!1,G=null,x=null,z=null;I.displayFileChooser=function(f,
r){a();if(Za){const p=z=document.createElement("div");p.classList.add("_eaglercraftX_mobile_file_chooser_popup");p.style.position="absolute";p.style.backgroundColor="white";p.style.fontFamily="sans-serif";p.style.top="10%";p.style.left="10%";p.style.right="10%";p.style.border="5px double black";p.style.padding="15px";p.style.textAlign="left";p.style.fontSize="20px";p.style.userSelect="none";p.style.zIndex="150";var w=document.createElement("h3");w.appendChild(document.createTextNode("File Chooser"));
p.appendChild(w);w=document.createElement("p");const D=x=document.createElement("input");D.type="file";D.accept=null===f?"."+r:f;D.multiple=!1;w.appendChild(D);p.appendChild(w);f=document.createElement("p");r=document.createElement("button");r.classList.add("_eaglercraftX_mobile_file_chooser_btn_cancel");r.style.fontSize="1.0em";r.addEventListener("click",function(){z===p&&(Q.removeChild(p),x=z=null)});r.appendChild(document.createTextNode("Cancel"));f.appendChild(r);f.appendChild(document.createTextNode(" "));
r=document.createElement("button");r.classList.add("_eaglercraftX_mobile_file_chooser_btn_done");r.style.fontSize="1.0em";r.style.fontWeight="bold";r.addEventListener("click",function(){if(z===p){if(0<D.files.length){const g=D.files[0];g.arrayBuffer().then(function(v){t=!0;G={fileName:g.name,fileData:v}}).catch(function(){t=!0;G=null})}else t=!0,G=null;Q.removeChild(p);x=z=null}});r.appendChild(document.createTextNode("Done"));f.appendChild(r);p.appendChild(f);Q.appendChild(p)}else{const p=x=document.createElement("input");
p.type="file";p.style.position="absolute";p.style.left="0px";p.style.top="0px";p.style.zIndex="-100";p.accept=null===f?"."+r:f;p.multiple=!1;p.addEventListener("change",function(){if(x===p){if(0<p.files.length){const D=p.files[0];D.arrayBuffer().then(function(g){t=!0;G={fileName:D.name,fileData:g}}).catch(function(){t=!0;G=null})}else t=!0,G=null;Q.removeChild(p);x=null}});Q.appendChild(p);window.setTimeout(function(){p.click()},50)}};I.fileChooserHasResult=function(){return t};I.getFileChooserResult=
function(){t=!1;const f=G;G=null;return f};I.clearFileChooserResult=a;I.downloadFileWithNameU8=function(f,r){const w=URL.createObjectURL(new Blob([r],{type:"application/octet-stream"}));mc(f,w,function(){URL.revokeObjectURL(w)})};I.downloadFileWithNameA=function(f,r){const w=URL.createObjectURL(new Blob([r],{type:"application/octet-stream"}));mc(f,w,function(){URL.revokeObjectURL(w)})};I.downloadScreenshot=function(f,r){mc(f,r.toDataURL("image/png"),null)};var B=null,H=null,W=null;const da=fb+"showDebugConsole",
u=hb?"beforeunload":"unload";try{window.addEventListener(u,()=>{if(qc){var f=qc;W=H=B=qc=null;f.close()}})}catch(f){}(gb||d())&&c();rc=function(f,r){var w=qc.innerHeight+qc.pageYOffset>=H.offsetHeight;k(f+"\n",r?"#DD0000":"#000000");w&&l()};I.showDebugConsole=function(){b(!0);c()};I.addLogMessage=Lb;I.isShowingDebugConsole=function(){return!!qc};I.getFaviconURL=function(){return Sa}};va.getEPKFileData=function(a){const b=Na[a];Na[a]=null;return b};va.getEPKFileCount=function(){return Na.length};
if("undefined"!==typeof window){va.loadImageFile0=new WebAssembly.Suspending(function(a,b){return new Promise(function(d){const c=URL.createObjectURL(new Blob([a],{type:b}));if(c){const k=document.createElement("img");k.addEventListener("load",function(){URL.revokeObjectURL(c);d({width:k.width,height:k.height,img:k})});k.addEventListener("error",function(){URL.revokeObjectURL(c);d(null)});k.src=c}else d(null)})});var sc=null,tc=null;va.loadImageFile1=function(a,b){const d=a.width,c=a.height;if(a=
a.img)sc||=document.createElement("canvas"),sc.width<d&&(sc.width=d),sc.height<c&&(sc.height=c),tc||(tc=sc.getContext("2d",{willReadFrequently:!0}),tc.imageSmoothingEnabled=!1),tc.clearRect(0,0,d,c),tc.drawImage(a,0,0,d,c),b.set(tc.getImageData(0,0,d,c).data,0)}}else C(va,"loadImageFile0"),C(va,"loadImageFile1");function Tb(a){xa.getContext=function(){return a};xa.registerIsEndedHandler=function(b,d){d.selfEndHandler||(d.selfEndHandler=function(){d.isEnded=!0});b.addEventListener("ended",d.selfEndHandler)};xa.releaseIsEndedHandler=function(b,d){d.selfEndHandler&&b.removeEventListener("ended",d.selfEndHandler)};xa.decodeAudioBrowser=new WebAssembly.Suspending(function(b,d){return new Promise(function(c){const k=new Uint8Array(b.length);k.set(b,0);a.decodeAudioData(k.buffer,c,function(){h("Failed to load audio: {}",
d);c(null)})})})}function Ub(){xa.getContext=function(){return null};C(xa,"registerIsEndedHandler");C(xa,"releaseIsEndedHandler");C(xa,"decodeAudioBrowser")};function uc(a){return"string"===typeof a?a:"undefined"===typeof a?null:"string"===typeof a[0]?a[0]:null}function vc(a){return"undefined"===typeof a?null:"undefined"===typeof a.data?null:a.data}
ya.openDB=new WebAssembly.Suspending(function(a){return new Promise(function(b){if("undefined"===typeof indexedDB)b({failedInit:!0,failedLocked:!1,failedError:"IndexedDB not supported",database:null});else{try{var d=indexedDB.open(a,1)}catch(k){b({failedInit:!0,failedLocked:!1,failedError:"Exception opening database",database:null});return}var c=b;d.addEventListener("success",function(){c&&c({failedInit:!1,failedLocked:!1,failedError:null,database:d.result});c=null});d.addEventListener("blocked",
function(){c&&c({failedInit:!1,failedLocked:!0,failedError:"Database is locked",database:null});c=null});d.addEventListener("error",function(){c&&c({failedInit:!0,failedLocked:!1,failedError:"Opening database failed",database:null});c=null});d.addEventListener("upgradeneeded",function(){d.result.createObjectStore("filesystem",{keyPath:["path"]})})}})});
function wc(a,b){return new Promise(function(d){const c=a.transaction("filesystem","readwrite").objectStore("filesystem").delete([b]);c.addEventListener("success",function(){d(!0)});c.addEventListener("error",function(){d(!1)})})}ya.eaglerDelete=new WebAssembly.Suspending(wc);
function xc(a,b){return new Promise(function(d){const c=a.transaction("filesystem","readonly").objectStore("filesystem").get([b]);c.addEventListener("success",function(){d(vc(c.result))});c.addEventListener("error",function(){d(null)})})}ya.eaglerRead=new WebAssembly.Suspending(xc);
function yc(a,b,d){return new Promise(function(c){const k=a.transaction("filesystem","readwrite").objectStore("filesystem").put({path:b,data:d});k.addEventListener("success",function(){c(!0)});k.addEventListener("error",function(){c(!1)})})}ya.eaglerWrite=new WebAssembly.Suspending(yc);
ya.eaglerExists=new WebAssembly.Suspending(function(a,b){return new Promise(function(d){const c=a.transaction("filesystem","readonly").objectStore("filesystem").count([b]);c.addEventListener("success",function(){d(0<c.result)});c.addEventListener("error",function(){d(!1)})})});ya.eaglerMove=new WebAssembly.Suspending(async function(a,b,d){const c=await xc(a,b);return c&&await yc(a,d,c)?await wc(a,b):!1});
ya.eaglerCopy=new WebAssembly.Suspending(async function(a,b,d){return(b=await xc(a,b))&&await yc(a,d,b)});ya.eaglerSize=new WebAssembly.Suspending(function(a,b){return new Promise(function(d){const c=a.transaction("filesystem","readonly").objectStore("filesystem").get([b]);c.addEventListener("success",function(){const k=vc(c.result);d(k?k.byteLength:-1)});c.addEventListener("error",function(){d(-1)})})});
function zc(a){if(0===a.length)return-1;for(var b=0,d=0,c=a.length;d<c;++d)47===a.charCodeAt(d)&&++b;return b}
ya.eaglerIterate=new WebAssembly.Suspending(function(a,b,d){return new Promise(function(c){const k=[],l=a.transaction("filesystem","readonly").objectStore("filesystem").openCursor(),t=0===b.length,G=d?-1:zc(b);l.addEventListener("success",function(){const x=l.result;if(null===x||null===x.key)c({length:k.length,getRow:function(B){return k[B]}});else{var z=uc(x.key);null!=z&&(!t&&!z.startsWith(b)||!d&&zc(z)!==G||k.push(z));x.continue()}});l.addEventListener("error",function(){c(null)})})});async function Vb(){function a(){var m=window.devicePixelRatio;.01>m&&(m=1);da=W=0;for(var A=R;A&&!isNaN(A.offsetLeft)&&!isNaN(A.offsetTop);)W+=A.offsetLeft-A.scrollLeft,da+=A.offsetTop-A.scrollTop,A=A.offsetParent;A=Q.clientWidth*m|0;var V=Q.clientHeight*m|0,P=0,Z=0,pa=A,na=V;if(X){na=window.visualViewport;var aa=na.scale;P=na.pageLeft*m*aa;Z=na.pageTop*m*aa;pa=na.width*m*aa;na=na.height*m*aa;1>pa&&(pa=1);1>na&&(na=1);0>P?(pa+=P,P=0):P>=A&&(P=A-1);0>Z?(na+=Z,Z=0):Z>=V&&(Z=V-1);P+pa>A&&(pa=A-P);Z+
na>V&&(na=V-Z)}aa={eventTypeMask:0};L!==m&&(L=m,aa.eventTypeMask|=4,aa.windowDPI=m);if(y!==A||E!==V)y=A,E=V,aa.eventTypeMask|=1,aa.windowWidth=A,aa.windowHeight=V;if(S!==P||Y!==Z||Ga!==pa||bb!==na)S=P,Y=Z,Ga=pa,bb=na,aa.eventTypeMask|=2,aa.visualViewportX=P,aa.visualViewportY=Z,aa.visualViewportW=pa,aa.visualViewportH=na;0!==aa.eventTypeMask&&U(0,9,aa)}function b(m){const A=m.length,V=Array(A);for(var P=0;P<A;++P){const Z=m.item(P);V[P]={pointX:Z.pageX-W,pointY:Z.pageY-da,radius:.5*(Z.radiusX+Z.radiusY),
force:Z.force,pointUID:Z.identifier}}return V}function d(m,A){return{eventType:m,keyCode:A.code||null,keyName:A.key||null,legacyCode:"number"===typeof A.which?A.which:"number"===typeof A.keyCode?A.keyCode:0,location:A.location,mods:(A.ctrlKey?1:0)|(A.shiftKey?2:0)|(A.metaKey?4:0)}}function c(){return new Promise(function(m){if(-1!==M)throw Error("Main thread is already waiting for VSync!");const A=[!1];window.requestAnimationFrame(function(){A[0]||(A[0]=!0,-1!==M&&(window.clearTimeout(M),M=-1),m())});
M=window.setTimeout(function(){A[0]||(A[0]=!0,M=-1,m())},20)})}function k(m){return new Promise(function(A){setTimeout(A,m)})}function l(m){if(0<m&&1E3>=m){const V=1E3/m;if(0===ha)ha=performance.now()+V;else{m=performance.now();var A=ha-m|0;if(0<A)return!Ib&&Ac?Bc().then(function(){var P=performance.now(),Z=ha-P|0;if(0<Z)return k(Z).then(function(){var pa=performance.now();(ha+=V)<pa&&(ha=pa)});(ha+=V)<P&&(ha=P)}):k(A).then(function(){var P=performance.now();(ha+=V)<P&&(ha=P)});(ha+=V)<m&&(ha=m)}}else ha=
0;return Ib?Cc(0):Bc()}function t(m){if(Ba){wa=!!m;var A=performance.now()|0;if(m){Ha=!0;try{R.requestPointerLock()}catch(V){}-1!==ta&&window.clearTimeout(ta);ta=-1;3E3>A-Qa&&(ta=window.setTimeout(function(){try{R.requestPointerLock()}catch(V){}},3100-(A-Qa)))}else if(-1!==ta&&window.clearTimeout(ta),ta=-1,!Ha)try{document.exitPointerLock()}catch(V){}}}function G(){if(ia)if(n.matches){if(q)try{navigator.keyboard.unlock()}catch(m){}try{document.exitFullscreen()}catch(m){}}else{if(q)try{navigator.keyboard.lock()}catch(m){}try{R.requestFullscreen()}catch(m){}}}
function x(){B()?z():f?(f.blur(),f.value="",setTimeout(function(){f&&(u?u.removeChild(f):f.remove(),f=null);u&&(Q.removeChild(u),u=null)},10)):(u&&(Q.removeChild(u),u=null),u=document.createElement("form"),u.setAttribute("autocomplete","off"),u.classList.add("_eaglercraftX_text_input_wrapper"),u.style.position="absolute",u.style.top="0px",u.style.left="0px",u.style.right="0px",u.style.bottom="0px",u.style.zIndex="-100",u.style.margin="0px",u.style.padding="0px",u.style.border="none",u.addEventListener("submit",
function(m){m.preventDefault();m.stopPropagation();m=m.timeStamp;m&&(0!==D&&10>m-D||0!==g&&10>m-g||0!==v&&10>m-v)||(p||(e("Note: Generating return keystroke from submit event on form, this browser probably doesn't generate keydown/beforeinput/input when enter/return is pressed on the on-screen keyboard"),p=!0),U(0,3,{eventType:0,absoluteCode:28,absoluteChar:10}))}),f=document.createElement("input"),f.type="password",f.value=" ",f.classList.add("_eaglercraftX_text_input_element"),f.setAttribute("autocomplete",
"off"),f.style.position="absolute",f.style.top="0px",f.style.left="0px",f.style.right="0px",f.style.bottom="0px",f.style.zIndex="-100",f.style.margin="0px",f.style.padding="0px",f.style.border="none",f.style.setProperty("-webkit-touch-callout","default"),f.addEventListener("beforeinput",function(m){if(f===m.target){r||(e("Note: Caught beforeinput event from on-screen keyboard, browser probably does not generate global keydown/keyup events on text fields, or does not respond to cancelling keydown"),
r=!0);var A=m.timeStamp;if(A){if(0!==D&&10>A-D)return;g=A}m.preventDefault();m.stopPropagation();switch(m.inputType){case "insertParagraph":case "insertLineBreak":U(0,3,{eventType:0,absoluteCode:28,absoluteChar:10});break;case "deleteWordBackward":case "deleteSoftLineBackward":case "deleteHardLineBackward":case "deleteEntireSoftLine":case "deleteContentBackward":case "deleteContent":U(0,3,{eventType:0,absoluteCode:14,absoluteChar:0});break;case "deleteWordForward":case "deleteSoftLineForward":case "deleteHardLineForward":case "deleteContentForward":U(0,
3,{eventType:0,absoluteCode:211,absoluteChar:0});break;case "insertText":case "insertCompositionText":case "insertReplacementText":(m=m.data)&&0<m.length&&U(0,3,{eventType:1,codepoints:m});break;case "insertFromPaste":case "insertFromPasteAsQuotation":case "insertFromDrop":case "insertFromYank":case "insertLink":(m=m.data)&&0<m.length&&U(0,4,m);break;case "historyUndo":case "historyRedo":case "deleteByDrag":case "deleteByCut":break;default:e('Ignoring InputEvent.inputType "{}" from on-screen keyboard',
m.inputType)}}}),f.addEventListener("input",function(m){if(f===m.target){w||(e("Note: Caught legacy input events from on-screen keyboard, browser could be outdated and doesn't support beforeinput event, or does not respond to cancelling beforeinput"),w=!0);if(m=m.timeStamp){if(0!==D&&10>m-D||0!==g&&10>m-g)return;v=m}m=f.value;var A=m.length;0===A?U(0,3,{eventType:0,absoluteCode:14,absoluteChar:0}):1===A?U(0,3,{eventType:1,codepoints:m}):(m=m.trim(),A=m.length,0===A?U(0,3,{eventType:0,absoluteCode:57,
absoluteChar:32}):U(0,3,{eventType:1,codepoints:m.charAt(A-1)}));f.value=" ";f.setSelectionRange(1,1)}}),f.addEventListener("focus",function(m){f===m.target&&(f.value=" ",f.setSelectionRange(1,1))}),f.addEventListener("select",function(m){f===m.target&&(m.preventDefault(),m.stopPropagation(),f.value=" ",f.setSelectionRange(1,1))}),u.appendChild(f),Q.appendChild(u),f.value=" ",f.focus(),f.select(),f.setSelectionRange(1,1))}function z(){if(f){f.blur();f.value="";const m=f,A=u;window.setTimeout(function(){null!==
A?(A.removeChild(m),A.remove()):m.remove()},10);u=f=null}else u&&(Q?Q.removeChild(u):u.remove(),u=null)}function B(){return!!f&&document.activeElement===f}var H=null,W=0,da=0,u=null,f=null,r=!1,w=!1,p=!1,D=0,g=0,v=0,y=-1,E=-1,L=-1,X=!1,S=-1,Y=-1,Ga=-1,bb=-1,Ba=!1,wa=!1,Ha=!1,Qa=0,ta=-1,ia=!1,n=null,q=!1,F=!1,M=-1,T=!1,ba=null,ua=null,Ra=null,mb=null,nb=null,ob=null,pb=null,qb=null,rb=null,sb=null,tb=null,ub=null,vb=null,wb=null,xb=null,yb=null,zb=null,Ab=null,Bb=null,Cb=null,Db=null,Eb=null,Fb=null;
H=document.createElement("div");H.classList.add("_eaglercraftX_keyboard_open_zone");H.style.display="none";H.style.position="absolute";H.style.backgroundColor="transparent";H.style.top="0px";H.style.left="0px";H.style.width="0px";H.style.height="0px";H.style.zIndex="100";H.style.touchAction="pan-x pan-y";H.style.setProperty("-webkit-touch-callout","none");H.style.setProperty("-webkit-tap-highlight-color","rgba(255, 255, 255, 0)");Q.appendChild(H);a();Q.addEventListener("contextmenu",ba=function(m){m.target!==
Dc&&(m.preventDefault(),m.stopPropagation())});R.addEventListener("mousedown",ua=function(m){m.preventDefault();m.stopPropagation();Ba&&wa&&document.pointerLockElement!==R?t(1):U(0,0,{eventType:0,posX:m.offsetX,posY:m.offsetY,button:m.button})});R.addEventListener("mouseup",Ra=function(m){m.preventDefault();m.stopPropagation();U(0,0,{eventType:1,posX:m.offsetX,posY:m.offsetY,button:m.button})});R.addEventListener("mousemove",mb=function(m){m.preventDefault();m.stopPropagation();U(0,0,{eventType:2,
posX:m.offsetX,posY:m.offsetY,movementX:m.movementX,movementY:m.movementY})});R.addEventListener("mouseenter",nb=function(){U(0,7,null)});R.addEventListener("mouseleave",ob=function(){U(0,8,null)});R.addEventListener("touchstart",pb=function(m){m.preventDefault();m.stopPropagation();U(0,2,{eventType:0,changedTouches:b(m.changedTouches),targetTouches:b(m.targetTouches)});z()});R.addEventListener("touchend",qb=function(m){m.preventDefault();m.stopPropagation();U(0,2,{eventType:2,changedTouches:b(m.changedTouches),
targetTouches:b(m.targetTouches)})});R.addEventListener("touchmove",rb=function(m){m.preventDefault();m.stopPropagation();U(0,2,{eventType:1,changedTouches:b(m.changedTouches),targetTouches:b(m.targetTouches)})});R.addEventListener("touchcancel",sb=function(m){U(0,2,{eventType:2,changedTouches:b(m.changedTouches),targetTouches:b(m.targetTouches)})});R.addEventListener("wheel",Ab=function(m){m.preventDefault();m.stopPropagation();U(0,0,{eventType:3,posX:m.offsetX,posY:m.offsetY,wheel:m.deltaY})});
window.addEventListener("blur",Cb=function(){U(0,6,null)});window.addEventListener("focus",Bb=function(){U(0,5,null)});window.addEventListener("keydown",vb=function(m){Ec||(m.preventDefault(),m.stopPropagation());"F11"!==m.key||m.repeat?(U(0,1,d(m.repeat?2:0,m)),m.timeStamp&&"Unidentified"!==m.key&&(D=m.timeStamp)):G()});window.addEventListener("keyup",wb=function(m){Ec||(m.preventDefault(),m.stopPropagation());U(0,1,d(1,m))});H.addEventListener("touchstart",xb=function(m){m.preventDefault();m.stopPropagation()});
H.addEventListener("touchend",yb=function(m){m.preventDefault();m.stopPropagation();x()});H.addEventListener("touchmove",zb=function(m){m.preventDefault();m.stopPropagation()});(Ba="function"===typeof document.exitPointerLock)?(document.addEventListener("pointerlockchange",Db=function(){window.setTimeout(function(){const m=document.pointerLockElement===R;m||wa&&(Qa=performance.now()|0);wa=m},60);Ha=!1}),document.addEventListener("pointerlockerror",Eb=function(){Ha=!1})):h("Pointer lock is not supported on this browser");
(ia="function"===typeof document.exitFullscreen)?(n=window.matchMedia("(display-mode: fullscreen)"),(q=!(!navigator.keyboard||!navigator.keyboard.lock))&&n.addEventListener("change",Fb=function(){n.matches||navigator.keyboard.unlock()})):h("Fullscreen is not supported on this browser");if("undefined"!==typeof window.visualViewport)if("body"===Ua.tagName.toLowerCase())X=!0;else{const m=document.body;10>=Math.abs(m.clientWidth-Q.clientWidth)&&10>=Math.abs(m.clientHeight-Q.clientHeight)&&(X=!0)}else X=
!1;X&&e("Note: Detected game is embedded in body, some screens may be resized to window.visualViewport instead for a better mobile experience");try{await c(),F=!0}catch(m){F=!1}F||h("VSync is not supported on this browser");(T="function"===typeof navigator.getGamepads)?(window.addEventListener("gamepadconnected",tb=function(){U(0,10,{eventType:0})}),window.addEventListener("gamepaddisconnected",ub=function(m){U(0,10,{eventType:1,gamepad:m.gamepad})})):h("Gamepad detected as unsupported!");J.keyboardLayoutSupported=
function(){return!(!navigator.keyboard||!navigator.keyboard.getLayoutMap)};J.iterateKeyboardLayout=new WebAssembly.Suspending(async function(){const m=[];try{const A=await navigator.keyboard.getLayoutMap();A&&A.forEach&&A.forEach(function(V,P){m.push({key:V,value:P})})}catch(A){}return m});J.updateCanvasSize=function(m,A){R.width!==m&&(R.width=m);R.height!==A&&(R.height=A)};var ha=0;J.updatePlatformAndSleep=new WebAssembly.Suspending(function(m,A){a();if("string"!==typeof document.visibilityState||
"visible"===document.visibilityState)return F&&A?(ha=0,c()):0>=m?(ha=0,Ib?Cc(0):Bc()):l(m);ha=0;return k(50)});J.isVSyncSupported=function(){return F};J.mouseSetGrabbed=t;J.isMouseGrabSupported=function(){return Ba};J.isMouseGrabbed=function(){return wa};J.isPointerLocked=function(){return Ba&&(Ha||document.pointerLockElement===R)};J.supportsFullscreen=function(){return ia};J.toggleFullscreen=G;J.isFullscreen=function(){return ia&&n.matches};J.touchSetOpenKeyboardZone=function(m,A,V,P){0!==V&&0!==
P?(H.style.display="block",H.style.top=""+(E-A-P)/L+"px",H.style.left=""+m/L+"px",H.style.width=""+V/L+"px",H.style.height=""+P/L+"px"):(H.style.display="none",H.style.top="0px",H.style.left="0px",H.style.width="0px",H.style.height="0px")};J.touchCloseDeviceKeyboard=z;J.touchIsDeviceKeyboardOpenMAYBE=B;J.gamepadSupported=function(){return T};J.isVisualViewport=function(){return X};eb=function(){try{ba&&(Q.removeEventListener("contextmenu",ba),ba=null),ua&&(R.removeEventListener("mousedown",ua),ua=
null),Ra&&(R.removeEventListener("mouseup",Ra),Ra=null),mb&&(R.removeEventListener("mousemove",mb),mb=null),nb&&(R.removeEventListener("mouseenter",nb),nb=null),ob&&(R.removeEventListener("mouseleave",ob),ob=null),pb&&(R.removeEventListener("touchstart",pb),pb=null),qb&&(R.removeEventListener("touchend",qb),qb=null),rb&&(R.removeEventListener("touchmove",rb),rb=null),sb&&(R.removeEventListener("touchcancel",sb),sb=null),tb&&(window.removeEventListener("gamepadconnected",tb),tb=null),ub&&(window.removeEventListener("gamepaddisconnected",
ub),ub=null),vb&&(window.removeEventListener("keydown",vb),vb=null),wb&&(window.removeEventListener("keyup",wb),wb=null),xb&&(H.removeEventListener("touchstart",xb),xb=null),yb&&(H.removeEventListener("touchend",yb),yb=null),zb&&(H.removeEventListener("touchmove",zb),zb=null),Ab&&(R.removeEventListener("wheel",Ab),Ab=null),Bb&&(window.removeEventListener("focus",Bb),Bb=null),Cb&&(window.removeEventListener("blur",Cb),Cb=null),Db&&(document.removeEventListener("pointerlockchange",Db),Db=null),Eb&&
(document.removeEventListener("pointerlockerror",Eb),Eb=null),Fb&&(n.removeEventListener("change",Fb),Fb=null)}catch(m){h("Failed to remove event listeners! {}",m)}eb=null}};(function(){function a(){this._socket.close()}function b(g){this._socket.send(g)}function d(g){this._socket.send(g)}function c(){return this._frameCountStr+this._frameCountBin}function k(){const g=this._queue;return g?(g._next===g&&g._prev===g?this._queue=null:(this._queue=g._next,g._prev._next=g._next,g._next._prev=g._prev),g._next=null,g._prev=null,0===g.type?--this._frameCountStr:--this._frameCountBin,g):null}function l(){var g=this._frameCountStr+this._frameCountBin;if(0===g)return null;g=Array(g);
var v=0,y=this._queue;const E=y;do{g[v++]=y;var L=y._next;y._next=null;y._prev=null;y=L}while(y!==E);this._queue=null;this._frameCountBin=this._frameCountStr=0;return g}function t(){this._queue=null;this._frameCountBin=this._frameCountStr=0}function G(g,v){var y=g._queue;if(!y)return null;const E=y;do{var L=y._next;if(y.type===v)return v=y._prev,L===y&&v===y?g._queue=null:(y===E&&(g._queue=L),v._next=L,L._prev=v),y._next=null,y._prev=null,y;y=L}while(y!==E);return null}function x(g,v,y){var E=0,L=
g._queue,X=L;do{var S=L._next;L.type===v&&(y[E++]=L);L=S}while(L!==X);y.length=E;for(X=0;X<E;++X)L=y[X],S=L._next,v=L._prev,S===L&&v===L?g._queue=null:(L===g._queue&&(g._queue=S),v._next=S,S._prev=v)}function z(){return this._frameCountStr}function B(){if(0===this._frameCountStr)return null;const g=G(this,0);g?--this._frameCountStr:this._frameCountStr=0;return g}function H(){var g=this._frameCountStr;if(0===g)return null;g=Array(g);x(this,0,g);this._frameCountStr=0;return g}function W(){const g=this._frameCountStr;
if(0===g)return null;x(this,0,Array(g));this._frameCountStr=0}function da(){return this._frameCountBin}function u(){if(0===this._frameCountBin)return null;const g=G(this,1);g?--this._frameCountBin:this._frameCountBin=0;return g}function f(){var g=this._frameCountBin;if(0===g)return null;g=Array(g);x(this,1,g);this._frameCountBin=0;return g}function r(){const g=this._frameCountBin;if(0===g)return null;x(this,1,Array(g));this._frameCountBin=0}function w(g){this._enableStringFrames=g}function p(g){this._enableBinaryFrames=
g}function D(g){const v="string"===typeof g;if(v){if(!this._enableStringFrames)return}else if(!this._enableBinaryFrames)return;g={type:v?0:1,data:g,timestamp:performance.now(),_next:null,_prev:null};const y=this._queue;if(y){const E=y._prev;E._next=g;g._prev=E;g._next=y;y._prev=g}else this._queue=g,g._next=g,g._prev=g;v?++this._frameCountStr:++this._frameCountBin}za.createWebSocketHandle=function(g){let v;try{v=new WebSocket(g)}catch(E){return h("Failed to create WebSocket: {}",g),la("Exception Caught",
E),null}v.binaryType="arraybuffer";const y={state:1,_socket:v,_queue:null,_frameCountStr:0,_frameCountBin:0,_addRecievedFrame:D,_enableStringFrames:!0,_enableBinaryFrames:!0,closeSocket:a,sendStringFrame:b,sendBinaryFrame:d,availableFrames:c,getNextFrame:k,getAllFrames:l,clearFrames:t,availableStringFrames:z,getNextStringFrame:B,getAllStringFrames:H,clearStringFrames:W,availableBinaryFrames:da,getNextBinaryFrame:u,getAllBinaryFrames:f,clearBinaryFrames:r,setEnableStringFrames:w,setEnableBinaryFrames:p};
v.addEventListener("open",function(){y.state=2});v.addEventListener("message",function(E){y._addRecievedFrame(E.data)});v.addEventListener("close",function(){3!==y.state&&(y.state=0)});v.addEventListener("error",function(){1===y.state&&(y.state=3)});return y}})();function Xb(a,b){var d=Hb;const c=d&&200===b?a.getExtension("OES_vertex_array_object"):null,k=d&&200===b?a.getExtension("ANGLE_instanced_arrays"):null,l=d&&200===b&&null!==k,t=d&&(310===b||300===b)&&null!==a.getExtension("EXT_color_buffer_float"),G=d&&!t&&(310===b||300===b||200===b)&&null!==a.getExtension("EXT_color_buffer_half_float"),x=d&&200===b&&null!==a.getExtension("EXT_shader_texture_lod"),z=d&&200===b&&null!==a.getExtension("OES_fbo_render_mipmap"),B=d&&200===b&&null!==c,H=d&&200===b&&null!==
a.getExtension("OES_texture_float"),W=d&&300<=b&&null!==a.getExtension("OES_texture_float_linear"),da=d&&200===b&&null!==a.getExtension("OES_texture_half_float"),u=d&&200===b&&null!==a.getExtension("OES_texture_half_float_linear");d=d&&null!==a.getExtension("EXT_texture_filter_anisotropic");const f=null!==a.getExtension("WEBGL_debug_renderer_info"),r=300<=b?0:200===b&&B?1:-1,w=300<=b?0:200===b&&l?1:-1,p=[b,r,w,0,0];if(300<=b||z)p[3]|=4;if(300<=b||x)p[3]|=8;300<=b&&(p[3]|=16);(320<=b||(300<=b||H)&&
(t||G))&&(p[3]|=32);(320<=b||(300<=b||da)&&t)&&(p[3]|=64);d&&(p[3]|=128);(300<=b||u)&&(p[4]|=1);300<=b&&W&&(p[4]|=2);K.getCapBits=function(g){return p[g]};K.glEnable=a.enable.bind(a);K.glDisable=a.disable.bind(a);K.glClearColor=a.clearColor.bind(a);K.glClearDepth=a.clearDepth.bind(a);K.glClear=a.clear.bind(a);K.glDepthFunc=a.depthFunc.bind(a);K.glDepthMask=a.depthMask.bind(a);K.glCullFace=a.cullFace.bind(a);K.glViewport=a.viewport.bind(a);K.glBlendFunc=a.blendFunc.bind(a);K.glBlendFuncSeparate=a.blendFuncSeparate.bind(a);
K.glBlendEquation=a.blendEquation.bind(a);K.glBlendColor=a.blendColor.bind(a);K.glColorMask=a.colorMask.bind(a);K.glDrawBuffers=300<=b?a.drawBuffers.bind(a):oa("glDrawBuffers");K.glReadBuffer=300<=b?a.readBuffer.bind(a):oa("glReadBuffer");K.glReadPixels=a.readPixels.bind(a);K.glPolygonOffset=a.polygonOffset.bind(a);K.glLineWidth=a.lineWidth.bind(a);K.glGenBuffers=a.createBuffer.bind(a);K.glGenTextures=a.createTexture.bind(a);K.glCreateProgram=a.createProgram.bind(a);K.glCreateShader=a.createShader.bind(a);
K.glCreateFramebuffer=a.createFramebuffer.bind(a);K.glCreateRenderbuffer=a.createRenderbuffer.bind(a);K.glGenQueries=300<=b?a.createQuery.bind(a):oa("glGenQueries");K.glDeleteBuffers=a.deleteBuffer.bind(a);K.glDeleteTextures=a.deleteTexture.bind(a);K.glDeleteProgram=a.deleteProgram.bind(a);K.glDeleteShader=a.deleteShader.bind(a);K.glDeleteFramebuffer=a.deleteFramebuffer.bind(a);K.glDeleteRenderbuffer=a.deleteRenderbuffer.bind(a);K.glDeleteQueries=300<=b?a.deleteQuery.bind(a):oa("glDeleteQueries");
K.glBindBuffer=a.bindBuffer.bind(a);K.glBufferData=a.bufferData.bind(a);K.glBufferSubData=a.bufferSubData.bind(a);K.glEnableVertexAttribArray=a.enableVertexAttribArray.bind(a);K.glDisableVertexAttribArray=a.disableVertexAttribArray.bind(a);K.glVertexAttribPointer=a.vertexAttribPointer.bind(a);K.glActiveTexture=a.activeTexture.bind(a);K.glBindTexture=a.bindTexture.bind(a);K.glTexParameterf=a.texParameterf.bind(a);K.glTexParameteri=a.texParameteri.bind(a);K.glTexImage3D=300<=b?a.texImage3D.bind(a):
oa("glTexImage3D");K.glTexImage2D=a.texImage2D.bind(a);K.glTexSubImage2D=a.texSubImage2D.bind(a);K.glCopyTexSubImage2D=a.copyTexSubImage2D.bind(a);K.glTexStorage2D=300<=b?a.texStorage2D.bind(a):oa("glTexStorage2D");K.glPixelStorei=a.pixelStorei.bind(a);K.glGenerateMipmap=a.generateMipmap.bind(a);K.glShaderSource=a.shaderSource.bind(a);K.glCompileShader=a.compileShader.bind(a);K.glGetShaderi=a.getShaderParameter.bind(a);K.glGetShaderInfoLog=a.getShaderInfoLog.bind(a);K.glUseProgram=a.useProgram.bind(a);
K.glAttachShader=a.attachShader.bind(a);K.glDetachShader=a.detachShader.bind(a);K.glLinkProgram=a.linkProgram.bind(a);K.glGetProgrami=a.getProgramParameter.bind(a);K.glGetProgramInfoLog=a.getProgramInfoLog.bind(a);K.glDrawArrays=a.drawArrays.bind(a);K.glDrawElements=a.drawElements.bind(a);K.glBindAttribLocation=a.bindAttribLocation.bind(a);K.glGetAttribLocation=a.getAttribLocation.bind(a);K.glGetUniformLocation=a.getUniformLocation.bind(a);K.glGetUniformBlockIndex=300<=b?a.getUniformBlockIndex.bind(a):
oa("glGetUniformBlockIndex");K.glBindBufferRange=300<=b?a.bindBufferRange.bind(a):oa("glBindBufferRange");K.glUniformBlockBinding=300<=b?a.uniformBlockBinding.bind(a):oa("glUniformBlockBinding");K.glUniform1f=a.uniform1f.bind(a);K.glUniform2f=a.uniform2f.bind(a);K.glUniform3f=a.uniform3f.bind(a);K.glUniform4f=a.uniform4f.bind(a);K.glUniform1i=a.uniform1i.bind(a);K.glUniform2i=a.uniform2i.bind(a);K.glUniform3i=a.uniform3i.bind(a);K.glUniform4i=a.uniform4i.bind(a);K.glUniformMatrix2fv=a.uniformMatrix2fv.bind(a);
K.glUniformMatrix3fv=a.uniformMatrix3fv.bind(a);K.glUniformMatrix4fv=a.uniformMatrix4fv.bind(a);K.glUniformMatrix3x2fv=300<=b?a.uniformMatrix3x2fv.bind(a):oa("glUniformMatrix3x2fv");K.glUniformMatrix4x2fv=300<=b?a.uniformMatrix4x2fv.bind(a):oa("glUniformMatrix4x2fv");K.glUniformMatrix4x3fv=300<=b?a.uniformMatrix4x3fv.bind(a):oa("glUniformMatrix4x3fv");K.glBindFramebuffer=a.bindFramebuffer.bind(a);K.glCheckFramebufferStatus=a.checkFramebufferStatus.bind(a);K.glBlitFramebuffer=300<=b?a.blitFramebuffer.bind(a):
oa("glBlitFramebuffer");K.glRenderbufferStorage=a.renderbufferStorage.bind(a);K.glFramebufferTexture2D=a.framebufferTexture2D.bind(a);K.glFramebufferTextureLayer=300<=b?a.framebufferTextureLayer.bind(a):oa("glFramebufferTextureLayer");K.glBindRenderbuffer=a.bindRenderbuffer.bind(a);K.glFramebufferRenderbuffer=a.framebufferRenderbuffer.bind(a);K.glGetError=a.getError.bind(a);K.getAllExtensions=a.getSupportedExtensions.bind(a);K.isContextLost=a.isContextLost.bind(a);const D=[];l&&D.push("ANGLE_instanced_arrays");
t&&D.push("EXT_color_buffer_float");G&&D.push("EXT_color_buffer_half_float");x&&D.push("EXT_shader_texture_lod");z&&D.push("OES_fbo_render_mipmap");B&&D.push("OES_vertex_array_object");H&&D.push("OES_texture_float");W&&D.push("OES_texture_float_linear");da&&D.push("OES_texture_half_float");u&&D.push("OES_texture_half_float_linear");d&&D.push("EXT_texture_filter_anisotropic");f&&D.push("WEBGL_debug_renderer_info");K.dumpActiveExtensions=function(){return D};K.glGetInteger=function(g){g=a.getParameter(g);
return"number"===typeof g?g:0};K.glGetString=function(g){if(f)switch(g){case 7936:g=a.getParameter(37445);null==g&&(g=a.getParameter(7936));break;case 7937:g=a.getParameter(37446);null==g&&(g=a.getParameter(7937));break;default:g=a.getParameter(g)}else g=a.getParameter(g);return"string"===typeof g?g:null};switch(r){case 0:K.glGenVertexArrays=a.createVertexArray.bind(a);K.glDeleteVertexArrays=a.deleteVertexArray.bind(a);K.glBindVertexArray=a.bindVertexArray.bind(a);break;case 1:K.glGenVertexArrays=
c.createVertexArrayOES.bind(c);K.glDeleteVertexArrays=c.deleteVertexArrayOES.bind(c);K.glBindVertexArray=c.bindVertexArrayOES.bind(c);break;default:C(K,"glGenVertexArrays"),C(K,"glDeleteVertexArrays"),C(K,"glBindVertexArray")}switch(w){case 0:K.glVertexAttribDivisor=a.vertexAttribDivisor.bind(a);K.glDrawArraysInstanced=a.drawArraysInstanced.bind(a);K.glDrawElementsInstanced=a.drawElementsInstanced.bind(a);break;case 1:K.glVertexAttribDivisor=k.vertexAttribDivisorANGLE.bind(k);K.glDrawArraysInstanced=
k.drawArraysInstancedANGLE.bind(k);K.glDrawElementsInstanced=k.drawElementsInstancedANGLE.bind(k);break;default:C(K,"glVertexAttribDivisor"),C(K,"glDrawArraysInstanced"),C(K,"glDrawElementsInstanced")}};var Ac=!1;const Fc=new MessageChannel;var Gc=null;Fc.port2.addEventListener("message",function(){Gc()});async function Mb(){Fc.port1.start();Fc.port2.start();Gc=function(){Gc=null};Fc.port1.postMessage(0);Gc?await new Promise(function(a){setTimeout(function(){Gc?h("Immediate continue hack is not supported"):Ac=!0;a()},25)}):h("Immediate continue hack is not supported")}Aa.getRootElement=function(){return Ua};Aa.getParentElement=function(){return Q};Aa.getCanvasElement=function(){return R};
Aa.getEaglercraftXOpts=function(){return O};Aa.getEventCount=ac.K.bind(ac);Aa.getNextEvent=ac.j.bind(ac);
Aa.queueAsyncDownload=function(a,b,d){try{fetch(a,{cache:b?"force-cache":"no-store",mode:"cors"}).then(function(c){return c.arrayBuffer()}).then(function(c){U(1,0,{requestId:d,arrayBuffer:c})}).catch(function(c){h("Failed to complete async download: {}",a);la("Exception Caught",c);U(1,0,{requestId:d,arrayBuffer:null})})}catch(c){h("Failed to fetch: {}",a),la("Exception Caught",c),U(1,0,{requestId:d,arrayBuffer:null})}};
Aa.download=new WebAssembly.Suspending(function(a,b){return new Promise(function(d){try{fetch(a,{cache:b?"force-cache":"no-store",mode:"cors"}).then(function(c){return c.arrayBuffer()}).then(function(c){d(c)}).catch(function(c){h("Failed to complete download: {}",a);la("Exception Caught",c);d(null)})}catch(c){h("Failed to fetch: {}",a),la("Exception Caught",c),d(null)}})});Aa.writeCrashReport=function(a){dc(a,!1)};Aa.steadyTimeMillis=performance.now.bind(performance);
function Cc(a){return new Promise(function(b){setTimeout(b,a)})}Aa.sleep=new WebAssembly.Suspending(Cc);function Hc(a){Ac?(Gc=a,Fc.port1.postMessage(0)):setTimeout(a,0)}function Bc(){return new Promise(Hc)}Aa.immediateContinue=new WebAssembly.Suspending(Bc);Aa.immediateContinueSupported=function(){return Ac};Aa.setCrashReportString=function(a,b){db[a]=b};var Ic="undefined"!==typeof window,Jc=null;function Kc(){return new Promise(function(a){if("navigator"in window&&"mediaDevices"in window.navigator&&"getUserMedia"in window.navigator.mediaDevices)try{window.navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(b){a(b)}).catch(function(b){h("getUserMedia Error! (async)");la("Exception Caught",b);a(null)})}catch(b){h("getUserMedia Error!"),a(null)}else h("No getUserMedia!"),a(null)})}
async function Lc(){return Ic?null===Jc&&(Jc=await Kc(),null===Jc)?(Ic=!1,null):Jc:null}
function Ob(){function a(b){const d=new Date;return b.replace("${date}",d.getFullYear()+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+("0"+d.getDate()).slice(-2)+" "+("0"+d.getHours()).slice(-2)+"-"+("0"+d.getMinutes()).slice(-2)+"-"+("0"+d.getSeconds()).slice(-2))}Ca.getMic=new WebAssembly.Suspending(Lc);Ca.setDataAvailableHandler=function(b,d,c){const k=performance.now();b.addEventListener("dataavailable",function(l){if(d)Mc(l.data,performance.now()-k|0,function(t){const G=URL.createObjectURL(t);mc(a(c),
G,function(){URL.revokeObjectURL(G)})},{U:function(t){e(t)}});else{const t=URL.createObjectURL(l.data);mc(a(c),t,function(){URL.revokeObjectURL(t)})}})}};function Pb(){function a(k){try{const l=JSON.parse(k);this._peerConnection.setRemoteDescription(l).then(()=>{l.hasOwnProperty("type")&&"offer"===l.type&&this._peerConnection.createAnswer().then(t=>{this._peerConnection.setLocalDescription(t).then(()=>{U(2,1,{objId:this.objId,data:JSON.stringify(t)})}).catch(G=>{h('Failed to set local description for "{}"! {}',this.objId,G.message);U(2,3,{objId:this.objId})})}).catch(t=>{h('Failed to create answer for "{}"! {}',this.objId,t.message);U(2,3,{objId:this.objId})})}).catch(t=>
{h('Failed to set remote description for "{}"! {}',this.objId,t.message);U(2,3,{objId:this.objId})})}catch(l){h(l.message),U(2,3,{objId:this.objId})}}function b(k){try{this._peerConnection.addIceCandidate(new RTCIceCandidate(JSON.parse(k))).catch(l=>{h('Failed to parse ice candidate for "{}"! {}',this.objId,l.message);U(2,3,{objId:this.objId})})}catch(l){h(l.message),U(2,3,{objId:this.objId})}}function d(){this._peerConnection.close()}Da.isSupported=function(){return"undefined"!==typeof navigator.mediaDevices&&
"undefined"!==typeof navigator.mediaDevices.getUserMedia&&"srcObject"in HTMLAudioElement.prototype};let c=0;Da.createRTCPeerConnection=function(k,l,t){try{const x=c++;var G;const z=new RTCPeerConnection({iceServers:JSON.parse(k),optional:[{DtlsSrtpKeyAgreement:!0}]});z.addEventListener("icecandidate",B=>{B.candidate&&U(2,0,{objId:x,data:JSON.stringify({sdpMLineIndex:""+B.candidate.sdpMLineIndex,candidate:B.candidate.candidate})})});z.addEventListener("track",B=>{B=B.streams[0];G._aud=document.createElement("audio");
G._aud.autoplay=!0;G._aud.muted=!0;G._aud.srcObject=B;U(2,2,{objId:x,stream:B})});t.getTracks().forEach(function(B){z.addTrack(B,t)});l&&z.createOffer().then(B=>{z.setLocalDescription(B).then(()=>{U(2,1,{objId:x,data:JSON.stringify(B)})}).catch(H=>{h('Failed to set local description for "{}"! {}',x,H.message);U(2,3,{objId:x})})}).catch(B=>{h('Failed to set create offer for "{}"! {}',x,B.message);U(2,3,{objId:x})});z.addEventListener("connectionstatechange",()=>{const B=z.connectionState;"disconnected"!==
B&&"failed"!==B||U(2,3,{objId:x})});return G={objId:x,_peerConnection:z,setRemoteDescription:a,addRemoteICECandidate:b,closeHandle:d}}catch(x){return h(x.message),null}}};function Qb(){const a=new ra;let b;b={iceServers:[],g:null,h:null,readyState:1,v:null,description:null,D:!1,C:!0,disconnect:function(c){if(b.h){try{b.h.close()}catch(k){}b.h=null}if(b.g){try{b.g.close()}catch(k){}b.g=null}c||(b.C=!0);b.readyState=0}};N.supported=function(){return"undefined"!==typeof RTCPeerConnection};N.clientLANReadyState=function(){return b.readyState};N.clientLANCloseConnection=function(){b.disconnect(!1)};N.clientLANSendPacket=function(c){if(null!==b.h&&"open"===b.h.readyState)try{b.h.send(c)}catch(k){b.disconnect(!1)}else b.disconnect(!1)};
N.clientLANReadPacket=function(){const c=a.j();return c?new Uint8Array(c.data):null};N.clientLANAvailable=function(){return a.u};N.clientLANSetICEServersAndConnect=function(c){b.iceServers.length=0;for(let k of c)c=k.split(";"),1===c.length?b.iceServers.push({urls:c[0]}):3===c.length&&b.iceServers.push({urls:c[0],username:c[1],credential:c[2]});2!==b.readyState&&1!==b.readyState||b.disconnect(!0);try{if(b.h){try{b.h.close()}catch(k){}b.h=null}if(b.g)try{b.g.close()}catch(k){}b.g=new RTCPeerConnection({iceServers:b.iceServers,
optional:[{DtlsSrtpKeyAgreement:!0}]});b.readyState=1}catch(k){la("Could not create LAN client RTCPeerConnection!",k);b.readyState=-2;return}try{const k=[];b.g.addEventListener("icecandidate",t=>{if(t.candidate){if(0===k.length){const G=[0,0],x=()=>{if(null!==b.g&&"disconnected"!==b.g.connectionState){const z=++G[1];G[0]!==k.length&&3>z?(G[0]=k.length,setTimeout(x,2E3)):(b.v=JSON.stringify(k),k.length=0)}};setTimeout(x,2E3)}k.push({sdpMLineIndex:t.candidate.sdpMLineIndex,candidate:t.candidate.candidate})}});
b.h=b.g.createDataChannel("lan");b.h.binaryType="arraybuffer";let l;l=()=>{0<k.length?setTimeout(l,10):(b.C=!1,b.D=!0)};b.h.addEventListener("open",l);b.h.addEventListener("message",t=>{a.push({data:t.data,_next:null})});b.g.createOffer().then(t=>{b.g.setLocalDescription(t).then(()=>{b.description=JSON.stringify(t)}).catch(G=>{h("Failed to set local description! {}",G.message);b.readyState=-1;b.disconnect(!1)})}).catch(t=>{h("Failed to set create offer! {}",t.message);b.readyState=-1;b.disconnect(!1)});
b.g.addEventListener("connectionstatechange",()=>{var t=b.g.connectionState;"disconnected"===t?b.disconnect(!1):"connected"===t?b.readyState=2:"failed"===t&&(b.readyState=-1,b.disconnect(!1))})}catch(k){if(b.h){try{b.h.close()}catch(l){}b.h=null}if(b.g){try{b.g.close()}catch(l){}b.g=null}la("Could not create LAN client RTCDataChannel!",k);b.readyState=-2}};N.clearLANClientState=function(){b.v=b.description=null;b.D=!1;b.C=!0};N.clientLANAwaitICECandidate=function(){if(null===b.v)return null;const c=
b.v;b.v=null;return c};N.clientLANAwaitDescription=function(){if(null===b.description)return null;const c=b.description;b.description=null;return c};N.clientLANAwaitChannel=function(){return b.D?(b.D=!1,!0):!1};N.clientLANClosed=function(){return b.C};N.clientLANSetICECandidate=function(c){try{const k=JSON.parse(c);for(c=0;c<k.length;++c)b.g.addIceCandidate(new RTCIceCandidate(k[c]))}catch(k){la("Uncaught exception setting remote ICE candidates",k),b.readyState=-1,b.disconnect(!1)}};N.clientLANSetDescription=
function(c){try{b.g.setRemoteDescription(JSON.parse(c))}catch(k){la("Uncaught exception setting remote description",k),b.readyState=-1,b.disconnect(!1)}};let d;d={iceServers:[],A:new Map,F:new Map,disconnect:function(c){const k=d.A.get(c);if(k){d.A.delete(c);k.l&&d.F.delete(k.l);try{k.disconnect()}catch(l){}k.s(4,null)}}};N.serverLANInitializeServer=function(c){d.iceServers.length=0;for(let k of c)c=k.split(";"),1===c.length?d.iceServers.push({urls:c[0]}):3===c.length&&d.iceServers.push({urls:c[0],
username:c[1],credential:c[2]})};N.serverLANCloseServer=function(){for(let c of Object.values(d.A))if(c){try{c.disconnect()}catch(k){}c.s(4,null)}d.A.clear()};N.serverLANCreatePeer=function(c){try{const k=new ra;let l;l={i:c,g:new RTCPeerConnection({iceServers:d.iceServers,optional:[{DtlsSrtpKeyAgreement:!0}]}),h:null,l:null,s:function(x,z){k.push({type:x,data:z,_next:null})},disconnect:function(){l.h&&l.h.close();l.g.close()}};d.A.set(l.i,l);const t=[];l.g.addEventListener("icecandidate",x=>{if(x.candidate){if(0===
t.length){const z=[0,0],B=()=>{if(null!==l.g&&"disconnected"!==l.g.connectionState){const H=++z[1];z[0]!==t.length&&3>H?(z[0]=t.length,setTimeout(B,2E3)):(l.s(0,JSON.stringify(t)),t.length=0)}};setTimeout(B,2E3)}t.push({sdpMLineIndex:x.candidate.sdpMLineIndex,candidate:x.candidate.candidate})}});let G;G=x=>{0<t.length?setTimeout(G,10,x):x.channel&&(x=x.channel,null!==l.h?x.close():(l.h=x,l.s(2,null),l.h.addEventListener("message",z=>{z=z.data;l.l?ab(l.l,z):l.s(3,new Uint8Array(z))})))};l.g.addEventListener("datachannel",
G);l.g.addEventListener("connectionstatechange",()=>{const x=l.g.connectionState;"disconnected"!==x&&"failed"!==x||d.disconnect(l.i)});return{peerId:l.i,countAvailableEvents:function(){return k.u},nextEvent:function(){return k.j()},writePacket:function(x){let z=!1;if(null!==l.h&&"open"===l.h.readyState)try{l.h.send(x)}catch(B){z=!0}else z=!0;z&&d.disconnect(l.i)},handleRemoteICECandidates:function(x){try{const z=JSON.parse(x);for(let B of z)l.g.addIceCandidate(new RTCIceCandidate(B))}catch(z){h('Failed to parse ice candidate for "{}"! {}',
l.i,z.message),d.disconnect(l.i)}},handleRemoteDescription:function(x){try{const z=JSON.parse(x);l.g.setRemoteDescription(z).then(()=>{z.hasOwnProperty("type")&&"offer"===z.type&&l.g.createAnswer().then(B=>{l.g.setLocalDescription(B).then(()=>{l.s(1,JSON.stringify(B))}).catch(H=>{h('Failed to set local description for "{}"! {}',l.i,H.message);d.disconnect(l.i)})}).catch(B=>{h('Failed to create answer for "{}"! {}',l.i,B.message);d.disconnect(l.i)})}).catch(B=>{h('Failed to set remote description for "{}"! {}',
l.i,B.message);d.disconnect(l.i)})}catch(z){h('Failed to parse remote description for "{}"! {}',l.i,z.message),d.disconnect(l.i)}},mapIPC:function(x){l.l?x||(d.F.delete(l.l),l.l=null):x&&(l.l=x,d.F.set(x,l))},disconnect:function(){d.disconnect(l.i)}}}catch(k){return la("Failed to create WebRTC LAN peer!",k),null}};$a=function(c,k){if(c=d.F.get(c)){let l=!1;if(c.h&&"open"===c.h.readyState)try{c.h.send(k)}catch(t){l=!0}else l=!0;l&&d.disconnect(c.i);return!0}return!1}};function Rb(){function a(g,v){g.allow=v;return g.allow===v}function b(g,v){const y=g.sandbox;for(var E=0;E<v.length;++E)y.add(v[E]);for(E=0;E<v.length;++E)if(!y.contains(v[E]))return!1;for(E=0;E<y.length;++E)if(!v.find(L=>L===y[E]))return!1;return!0}function d(g){if(H)p=document.createElement("iframe"),p.allow="",p.referrerPolicy="strict-origin",p.sandbox.add("allow-downloads"),g.scriptEnabled&&(p.sandbox.add("allow-scripts"),p.sandbox.add("allow-pointer-lock"));else{p=document.createElement("iframe");
p.referrerPolicy="strict-origin";var v=["allow-downloads"];g.scriptEnabled&&(v.push("allow-scripts"),v.push("allow-pointer-lock"));if(!a(p,"")||!b(p,v)){h("Caught safety exception while opening webview!");null!==p&&(p.remove(),p=null);h("Things you can try:");h("1. Set window.eaglercraftXOpts.forceWebViewSupport to true");h("2. Set window.eaglercraftXOpts.enableWebViewCSP to false");h("(these settings may compromise security)");c();w.innerHTML='<div style="padding-top:13vh;"><h1 style="text-align:center;"><img width="48" height="48" style="vertical-align:middle;" src="'+
Sa+'">&emsp;IFrame Safety Error</h1><h4 style="text-align:center;">The content cannot be displayed safely!</h4><h4 style="text-align:center;">Check console for more details</h4></div>';return}}p.j=!0;p.o="lazy";v=!1;if(1===g.contentMode){if(W&&B)if("string"===typeof p.csp){var y="default-src 'none';",E=g.strictCSPEnable?"":u?" https:":" http: https:";y=g.scriptEnabled?y+(" script-src 'unsafe-eval' 'unsafe-inline' data: blob:"+E+"; style-src 'unsafe-eval' 'unsafe-inline' data: blob:")+(E+"; img-src data: blob:")+
(E+"; font-src data: blob:")+(E+"; child-src data: blob:")+(E+"; frame-src data: blob:; media-src data: mediastream: blob:")+(E+"; connect-src data: blob:")+(E+"; worker-src data: blob:")+(E+";"):y+(" style-src data: 'unsafe-inline'"+E+"; img-src data:")+(E+"; font-src data:")+(E+"; media-src data:")+(E+";");p.csp=y}else ka("This browser does not support CSP attribute on iframes! (try Chrome)"),v=!0;else v=!0;v&&g.strictCSPEnable&&ka("Strict CSP was requested for this webview, but that feature is not available!")}else v=
!0;p.style.border="none";p.style.backgroundColor="white";p.style.width="100%";p.style.height="100%";p.classList.add("_eaglercraftX_webview_iframe_element");r.appendChild(p);1===g.contentMode?(y=x.decode(g.blob),g.blob=null,p.srcdoc=y):p.src=g.uri;const L=f,X=p;let S=!1;p.addEventListener("mouseover",function(){L!==f||X!==p||S||(S=!0,p.contentWindow.focus())});p.addEventListener("mouseout",function(){L===f&&X===p&&S&&(S=!1,window.focus())});g.scriptEnabled&&g.serverMessageAPIEnabled&&(D=function(Y){if(L===
f&&X===p&&Y.source===X.contentWindow){Y=Y.data;if("object"===typeof Y&&1===Y.ver&&"string"===typeof Y.channel&&0<Y.channel.length){if("boolean"===typeof Y.open){U(3,0,{eventType:Y.open?0:1,channelName:Y.channel});return}if("string"===typeof Y.data){U(3,1,{eventType:0,channelName:Y.channel,eventData:Y.data});return}if(Y.data instanceof ArrayBuffer){U(3,1,{eventType:1,channelName:Y.channel,eventData:Y.data});return}}ka("WebView sent an invalid message!")}else ka("Recieved message from on dead IFrame handler: (#{}) {}",
L,X.src)});e('WebView is loading: "{}"',1===g.contentMode?"about:srcdoc":p.src);e("JavaScript: {}, Strict CSP: {}, Message API: {}",g.scriptEnabled,g.strictCSPEnable&&!v,g.serverMessageAPIEnabled)}function c(){null!==w&&(++f,w.remove(),w=null);w=document.createElement("div");w.style.backgroundColor="white";w.style.width="100%";w.style.height="100%";w.classList.add("_eaglercraftX_webview_permission_screen");r.appendChild(w)}function k(g){c();w.innerHTML='<div style="padding-top:13vh;"><div style="margin:auto;max-width:450px;border:6px double black;text-align:center;padding:20px;"><h2><img width="32" height="32" style="vertical-align:middle;" src="'+
Sa+'">&emsp;Allow JavaScript</h2><p style="font-family:monospace;text-decoration:underline;word-wrap:break-word;" class="_eaglercraftX_permission_target_url"></p><h4 style="line-height:1.4em;">Strict CSP: '+(1!==g.contentMode?'<span style="color:red;">Impossible</span>':B&&W?g.strictCSPEnable?'<span style="color:green;">Enabled</span>':'<span style="color:red;">Disabled</span>':'<span style="color:red;">Unsupported</span>')+"&ensp;|&ensp;Message API: "+(g.serverMessageAPIEnabled?'<span style="color:red;">Enabled</span>':
'<span style="color:green;">Disabled</span>')+'</h4><p><input class="_eaglercraftX_remember_javascript" type="checkbox" checked> Remember my choice</p><p><button style="font-size:1.5em;" class="_eaglercraftX_allow_javascript">Allow</button>&emsp;<button style="font-size:1.5em;" class="_eaglercraftX_block_javascript">Block</button></p></div></div>';const v=f;if(1!==g.contentMode){const y=g.url;w.querySelector("._eaglercraftX_permission_target_url").innerText=255<y.length()?y.substring(0,253)+"...":
y}w.querySelector("._eaglercraftX_allow_javascript").addEventListener("click",function(){if(f===v&&null!==w){const y=w.querySelector("._eaglercraftX_remember_javascript");null!==y&&y.checked&&U(3,2,null);w.remove();w=null;++f;d(g)}});w.querySelector("._eaglercraftX_block_javascript").addEventListener("click",function(){if(f===v&&null!==w){const y=w.querySelector("._eaglercraftX_remember_javascript");null!==y&&y.checked&&U(3,3,null);l(g)}})}function l(g){c();w.innerHTML='<div style="padding-top:13vh;"><h1 style="text-align:center;"><img width="48" height="48" style="vertical-align:middle;" src="'+
Sa+'">&emsp;Content Blocked</h1><h4 style="text-align:center;">You chose to block JavaScript execution for this embed</h4><p style="text-align:center;"><button style="font-size:1.0em;" class="_eaglercraftX_re_evaluate_javascript">Re-evaluate</button></p></div>';const v=f;w.querySelector("._eaglercraftX_re_evaluate_javascript").addEventListener("click",function(){f===v&&null!==w&&(U(3,4,null),k(g))})}function t(g,v,y,E){if(r){const L=window.devicePixelRatio;r.style.top=""+v/L+"px";r.style.left=""+
g/L+"px";r.style.width=""+(y/L-10)+"px";r.style.height=""+(E/L-10)+"px"}}function G(){++f;p&&(p.remove(),p=null);D=null;w&&(w.remove(),w=null);r&&(r.remove(),r=null);window.focus()}const x=new TextDecoder("utf-8");var z=!1,B=!1,H=ib,W=jb;if(H)B=z=!0;else{B=z=!1;try{var da=document.createElement("iframe");z=null!=da&&"string"===typeof da.allow&&"object"===typeof da.sandbox;B=W&&z&&"string"===typeof da.csp}catch(g){h("Error checking iframe support"),h(g)}}z?!B&&W&&ka("This browser does not support CSP attribute on iframes! (try Chrome)"):
h("This browser does not meet the safety requirements for webview support, this feature will be disabled");const u=location.protocol&&"https:"===location.protocol.toLowerCase();var f=0,r=null,w=null,p=null,D=null;window.addEventListener("message",function(g){D&&g.source!==window&&D(g)});Ea.checkSupported=function(){return z};Ea.checkCSPSupported=function(){return B};Ea.sendStringMessage=function(g,v){try{var y;null!=p&&null!=(y=p.contentWindow)?y.postMessage({ver:1,channel:g,type:"string",data:v},
"*"):h("Server tried to send the WebView a message, but the message channel is not open!")}catch(E){la("Failed to send string message to WebView!",E)}};Ea.sendBinaryMessage=function(g,v){try{var y;if(null!=p&&null!=(y=p.contentWindow)){const E=new Uint8Array(v.length);E.set(v,0);y.postMessage({ver:1,channel:g,type:"binary",data:E.buffer},"*")}else h("Server tried to send the WebView a message, but the message channel is not open!")}catch(E){la("Failed to send string message to WebView!",E)}};Ea.beginShowing=
function(g,v,y,E,L,X){if(z)try{switch(null!==r&&G(),r=document.createElement("div"),r.classList.add("_eaglercraftX_webview_container_element"),r.style.border="5px solid #333333",r.style.zIndex="11",r.style.position="absolute",r.style.backgroundColor="#DDDDDD",r.style.fontFamily="sans-serif",t(y,E,L,X),Q.appendChild(r),g){case 0:d(v);break;case 1:if(1===v.contentMode){const S=new Uint8Array(v.blob.length);S.set(v.blob,0);v.blob=S}k(v);break;case 2:if(1===v.contentMode){const S=new Uint8Array(v.blob.length);
S.set(v.blob,0);v.blob=S}l(v)}}catch(S){la("Failed to begin showing WebView!",S)}};Ea.resize=t;Ea.endShowing=G};var Dc=null,Ec=!1;
function Sb(){var a=null;const b=new ra;var d=null;Fa.startIntegratedServer=new WebAssembly.Suspending(async function(){d||=URL.createObjectURL(new Blob(['"use strict"; (function(ctx, globals) {globals.__eaglerXOnMessage = function(o) {globals.__eaglerXOnMessage = function(oo) { console.error("Dropped IPC packet that was sent too early!"); };const eagRuntimeJSURL = URL.createObjectURL(new Blob([ o.eagruntimeJS ], { type: "text/javascript;charset=utf-8" }));ctx.getEaglercraftXOpts = function() { return o.eaglercraftXOpts; };ctx.getEagRuntimeJSURL = function() { return eagRuntimeJSURL; };ctx.getClassesWASMURL = function() { return o.classesWASM; };ctx.getClassesDeobfWASMURL = function() { return o.classesDeobfWASM; };ctx.getClassesTEADBGURL = function() { return o.classesTEADBG; };ctx.getEPKFiles = function() { return null; };ctx.getRootElement = function() { return null; };ctx.getMainArgs = function() { return ["_worker_process_"]; };ctx.getImageURL = function(idx) { return null; };ctx.runMain = function(mainFunc) { mainFunc(); };importScripts(eagRuntimeJSURL);};addEventListener("message", function(evt) { globals.__eaglerXOnMessage(evt.data); });})(self.__eaglercraftXLoaderContext = {}, self);'],{type:"text/javascript;charset=utf8"}));
try{a=new Worker(d)}catch(l){return la("Failed to create worker",l),!1}a.addEventListener("error",function(l){la("Worker Error",l.error)});a.addEventListener("message",function(l){const t=l.data.ch;t?"~!LOGGER"===t?Lb(l.data.txt,l.data.err):(l=l.data.dat)?$a(t,l)||b.push({ch:t,data:new Uint8Array(l),_next:null}):h("Recieved IPC packet with null buffer"):h("Recieved IPC packet with null channel")});const c=new Int8Array(La.length);c.set(La,0);try{var k=await fetch(Ta,{cache:"force-cache"}).then(l=>
l.arrayBuffer())}catch(l){la("Failed to fetch eagruntime.js contents",l);try{a.terminate()}catch(t){}return!1}a.postMessage({eaglercraftXOpts:O,eagruntimeJS:k,classesWASM:Ja,classesDeobfWASM:Ka,classesTEADBG:c.buffer});return!0});Fa.sendPacket=function(c,k){if(a){const l=new Uint8Array(k.length);l.set(k,0);a.postMessage({ch:c,dat:l.buffer},[l.buffer])}};ab=function(c,k){a&&a.postMessage({ch:c,dat:k},[k])};Fa.getAvailablePackets=b.K.bind(b);Fa.getNextPacket=b.j.bind(b);Fa.killWorker=function(){a&&
(a.terminate(),a=null)};Fa.showCrashReportOverlay=function(c,k,l,t,G){Dc||(Dc=document.createElement("div"),Dc.setAttribute("style","z-index:99;position:absolute;background-color:black;color:white;overflow-x:hidden;overflow-y:scroll;overflow-wrap:break-word;white-space:pre-wrap;font:18px sans-serif;padding:20px;display:none;"),Dc.classList.add("_eaglercraftX_integratedserver_crash_element"),Q.appendChild(Dc));Dc.innerText="";Dc.innerText="CURRENT DATE: "+(new Date).toLocaleString()+"\n\n"+c;c=window.devicePixelRatio;
Dc.style.top=""+l/c+"px";Dc.style.left=""+k/c+"px";Dc.style.width=""+(t/c-20)+"px";Dc.style.height=""+(G/c-20)+"px";Dc.style.display="block";Ec=!0};Fa.hideCrashReportOverlay=function(){Dc&&(Dc.style.display="none");Ec=!1};window.__curEaglerX188UnloadListenerCB=function(){a&&a.postMessage({ch:"~!WASM_AUTOSAVE"})}};var ec=null,Nc=!1;
function Zb(){const a=new ra;self.__eaglerXOnMessage=function(b){const d=b.ch;b=b.dat;d?"~!WASM_AUTOSAVE"===d?Nc=!0:b?a.push({ch:d,data:new Uint8Array(b),_next:null}):h("Recieved IPC packet with null buffer"):h("Recieved IPC packet with null channel")};Ia.sendPacket=function(b,d){const c=new Uint8Array(d.length);c.set(d,0);postMessage({ch:b,dat:c.buffer},[c.buffer])};Ia.getAvailablePackets=a.K.bind(a);Ia.getNextPacket=a.j.bind(a);Ia.setCrashCallback=function(){return{call:function(b){ec=b}}};Ia.isTabAboutToClose=
function(){const b=Nc;Nc=!1;return b}};sa.getByteBufferView=function(a,b){return new Int8Array(Ya,a,b)};sa.getUnsignedByteBufferView=function(a,b){return new Uint8Array(Ya,a,b)};sa.getUnsignedClampedByteBufferView=function(a,b){return new Uint8ClampedArray(Ya,a,b)};sa.getShortBufferView=function(a,b){return new Int16Array(Ya,a,b)};sa.getUnsignedShortBufferView=function(a,b){return new Uint16Array(Ya,a,b)};sa.getIntBufferView=function(a,b){return new Int32Array(Ya,a,b)};sa.getFloatBufferView=function(a,b){return new Float32Array(Ya,a,b)};const Oc={172351395:{name:"EBML",type:"Container"},646:{name:"EBMLVersion",type:"Uint"},759:{name:"EBMLReadVersion",type:"Uint"},754:{name:"EBMLMaxIDLength",type:"Uint"},755:{name:"EBMLMaxSizeLength",type:"Uint"},642:{name:"DocType",type:"String"},647:{name:"DocTypeVersion",type:"Uint"},645:{name:"DocTypeReadVersion",type:"Uint"},108:{name:"Void",type:"Binary"},63:{name:"CRC-32",type:"Binary"},190023271:{name:"SignatureSlot",type:"Container"},16010:{name:"SignatureAlgo",type:"Uint"},16026:{name:"SignatureHash",
type:"Uint"},16037:{name:"SignaturePublicKey",type:"Binary"},16053:{name:"Signature",type:"Binary"},15963:{name:"SignatureElements",type:"Container"},15995:{name:"SignatureElementList",type:"Container"},9522:{name:"SignedElement",type:"Binary"},139690087:{name:"Segment",type:"Container"},21863284:{name:"SeekHead",type:"Container"},3515:{name:"Seek",type:"Container"},5035:{name:"SeekID",type:"Binary"},5036:{name:"SeekPosition",type:"Uint"},88713574:{name:"Info",type:"Container"},13220:{name:"SegmentUID",
type:"Binary"},13188:{name:"SegmentFilename",type:"String"},1882403:{name:"PrevUID",type:"Binary"},1868715:{name:"PrevFilename",type:"String"},2013475:{name:"NextUID",type:"Binary"},1999803:{name:"NextFilename",type:"String"},1092:{name:"SegmentFamily",type:"Binary"},10532:{name:"ChapterTranslate",type:"Container"},10748:{name:"ChapterTranslateEditionUID",type:"Uint"},10687:{name:"ChapterTranslateCodec",type:"Uint"},10661:{name:"ChapterTranslateID",type:"Binary"},710577:{name:"TimecodeScale",type:"Uint"},
1161:{name:"Duration",type:"Float"},1121:{name:"DateUTC",type:"Date"},15273:{name:"Title",type:"String"},3456:{name:"MuxingApp",type:"String"},5953:{name:"WritingApp",type:"String"},103:{name:"Timecode",type:"Uint"},6228:{name:"SilentTracks",type:"Container"},6359:{name:"SilentTrackNumber",type:"Uint"},39:{name:"Position",type:"Uint"},43:{name:"PrevSize",type:"Uint"},35:{name:"SimpleBlock",type:"Binary"},32:{name:"BlockGroup",type:"Container"},33:{name:"Block",type:"Binary"},34:{name:"BlockVirtual",
type:"Binary"},13729:{name:"BlockAdditions",type:"Container"},38:{name:"BlockMore",type:"Container"},110:{name:"BlockAddID",type:"Uint"},37:{name:"BlockAdditional",type:"Binary"},27:{name:"BlockDuration",type:"Uint"},122:{name:"ReferencePriority",type:"Uint"},123:{name:"ReferenceBlock",type:"Int"},125:{name:"ReferenceVirtual",type:"Int"},36:{name:"CodecState",type:"Binary"},13730:{name:"DiscardPadding",type:"Int"},14:{name:"Slices",type:"Container"},104:{name:"TimeSlice",type:"Container"},76:{name:"LaceNumber",
type:"Uint"},77:{name:"FrameNumber",type:"Uint"},75:{name:"BlockAdditionID",type:"Uint"},78:{name:"Delay",type:"Uint"},79:{name:"SliceDuration",type:"Uint"},72:{name:"ReferenceFrame",type:"Container"},73:{name:"ReferenceOffset",type:"Uint"},74:{name:"ReferenceTimeCode",type:"Uint"},47:{name:"EncryptedBlock",type:"Binary"},106212971:{name:"Tracks",type:"Container"},46:{name:"TrackEntry",type:"Container"},87:{name:"TrackNumber",type:"Uint"},13253:{name:"TrackUID",type:"Uint"},3:{name:"TrackType",type:"Uint"},
57:{name:"FlagEnabled",type:"Uint"},8:{name:"FlagDefault",type:"Uint"},5546:{name:"FlagForced",type:"Uint"},28:{name:"FlagLacing",type:"Uint"},11751:{name:"MinCache",type:"Uint"},11768:{name:"MaxCache",type:"Uint"},254851:{name:"DefaultDuration",type:"Uint"},216698:{name:"DefaultDecodedFieldDuration",type:"Uint"},209231:{name:"TrackTimecodeScale",type:"Float"},4991:{name:"TrackOffset",type:"Int"},5614:{name:"MaxBlockAdditionID",type:"Uint"},4974:{name:"Name",type:"String"},177564:{name:"Language",
type:"String"},6:{name:"CodecID",type:"String"},9122:{name:"CodecPrivate",type:"Binary"},362120:{name:"CodecName",type:"String"},13382:{name:"AttachmentLink",type:"Uint"},1742487:{name:"CodecSettings",type:"String"},1785920:{name:"CodecInfoURL",type:"String"},438848:{name:"CodecDownloadURL",type:"String"},42:{name:"CodecDecodeAll",type:"Uint"},12203:{name:"TrackOverlay",type:"Uint"},5802:{name:"CodecDelay",type:"Uint"},5819:{name:"SeekPreRoll",type:"Uint"},9764:{name:"TrackTranslate",type:"Container"},
9980:{name:"TrackTranslateEditionUID",type:"Uint"},9919:{name:"TrackTranslateCodec",type:"Uint"},9893:{name:"TrackTranslateTrackID",type:"Binary"},96:{name:"Video",type:"Container"},26:{name:"FlagInterlaced",type:"Uint"},5048:{name:"StereoMode",type:"Uint"},5056:{name:"AlphaMode",type:"Uint"},5049:{name:"OldStereoMode",type:"Uint"},48:{name:"PixelWidth",type:"Uint"},58:{name:"PixelHeight",type:"Uint"},5290:{name:"PixelCropBottom",type:"Uint"},5307:{name:"PixelCropTop",type:"Uint"},5324:{name:"PixelCropLeft",
type:"Uint"},5341:{name:"PixelCropRight",type:"Uint"},5296:{name:"DisplayWidth",type:"Uint"},5306:{name:"DisplayHeight",type:"Uint"},5298:{name:"DisplayUnit",type:"Uint"},5299:{name:"AspectRatioType",type:"Uint"},963876:{name:"ColourSpace",type:"Binary"},1029411:{name:"GammaValue",type:"Float"},230371:{name:"FrameRate",type:"Float"},97:{name:"Audio",type:"Container"},53:{name:"SamplingFrequency",type:"Float"},14517:{name:"OutputSamplingFrequency",type:"Float"},31:{name:"Channels",type:"Uint"},15739:{name:"ChannelPositions",
type:"Binary"},8804:{name:"BitDepth",type:"Uint"},98:{name:"TrackOperation",type:"Container"},99:{name:"TrackCombinePlanes",type:"Container"},100:{name:"TrackPlane",type:"Container"},101:{name:"TrackPlaneUID",type:"Uint"},102:{name:"TrackPlaneType",type:"Uint"},105:{name:"TrackJoinBlocks",type:"Container"},109:{name:"TrackJoinUID",type:"Uint"},64:{name:"TrickTrackUID",type:"Uint"},65:{name:"TrickTrackSegmentUID",type:"Binary"},70:{name:"TrickTrackFlag",type:"Uint"},71:{name:"TrickMasterTrackUID",
type:"Uint"},68:{name:"TrickMasterTrackSegmentUID",type:"Binary"},11648:{name:"ContentEncodings",type:"Container"},8768:{name:"ContentEncoding",type:"Container"},4145:{name:"ContentEncodingOrder",type:"Uint"},4146:{name:"ContentEncodingScope",type:"Uint"},4147:{name:"ContentEncodingType",type:"Uint"},4148:{name:"ContentCompression",type:"Container"},596:{name:"ContentCompAlgo",type:"Uint"},597:{name:"ContentCompSettings",type:"Binary"},4149:{name:"ContentEncryption",type:"Container"},2017:{name:"ContentEncAlgo",
type:"Uint"},2018:{name:"ContentEncKeyID",type:"Binary"},2019:{name:"ContentSignature",type:"Binary"},2020:{name:"ContentSigKeyID",type:"Binary"},2021:{name:"ContentSigAlgo",type:"Uint"},2022:{name:"ContentSigHashAlgo",type:"Uint"},206814059:{name:"Cues",type:"Container"},59:{name:"CuePoint",type:"Container"},51:{name:"CueTime",type:"Uint"},55:{name:"CueTrackPositions",type:"Container"},119:{name:"CueTrack",type:"Uint"},113:{name:"CueClusterPosition",type:"Uint"},112:{name:"CueRelativePosition",type:"Uint"},
50:{name:"CueDuration",type:"Uint"},4984:{name:"CueBlockNumber",type:"Uint"},106:{name:"CueCodecState",type:"Uint"},91:{name:"CueReference",type:"Container"},22:{name:"CueRefTime",type:"Uint"},23:{name:"CueRefCluster",type:"Uint"},4959:{name:"CueRefNumber",type:"Uint"},107:{name:"CueRefCodecState",type:"Uint"},155296873:{name:"Attachments",type:"Container"},8615:{name:"AttachedFile",type:"Container"},1662:{name:"FileDescription",type:"String"},1646:{name:"FileName",type:"String"},1632:{name:"FileMimeType",
type:"String"},1628:{name:"FileData",type:"Binary"},1710:{name:"FileUID",type:"Uint"},1653:{name:"FileReferral",type:"Binary"},1633:{name:"FileUsedStartTime",type:"Uint"},1634:{name:"FileUsedEndTime",type:"Uint"},4433776:{name:"Chapters",type:"Container"},1465:{name:"EditionEntry",type:"Container"},1468:{name:"EditionUID",type:"Uint"},1469:{name:"EditionFlagHidden",type:"Uint"},1499:{name:"EditionFlagDefault",type:"Uint"},1501:{name:"EditionFlagOrdered",type:"Uint"},54:{name:"ChapterAtom",type:"Container"},
13252:{name:"ChapterUID",type:"Uint"},5716:{name:"ChapterStringUID",type:"String"},17:{name:"ChapterTimeStart",type:"Uint"},18:{name:"ChapterTimeEnd",type:"Uint"},24:{name:"ChapterFlagHidden",type:"Uint"},1432:{name:"ChapterFlagEnabled",type:"Uint"},11879:{name:"ChapterSegmentUID",type:"Binary"},11964:{name:"ChapterSegmentEditionUID",type:"Uint"},9155:{name:"ChapterPhysicalEquiv",type:"Uint"},15:{name:"ChapterTrack",type:"Container"},9:{name:"ChapterTrackNumber",type:"Uint"},0:{name:"ChapterDisplay",
type:"Container"},5:{name:"ChapString",type:"String"},892:{name:"ChapLanguage",type:"String"},894:{name:"ChapCountry",type:"String"},10564:{name:"ChapProcess",type:"Container"},10581:{name:"ChapProcessCodecID",type:"Uint"},1293:{name:"ChapProcessPrivate",type:"Binary"},10513:{name:"ChapProcessCommand",type:"Container"},10530:{name:"ChapProcessTime",type:"Uint"},10547:{name:"ChapProcessData",type:"Binary"},39109479:{name:"Tags",type:"Container"},13171:{name:"Tag",type:"Container"},9152:{name:"Targets",
type:"Container"},10442:{name:"TargetTypeValue",type:"Uint"},9162:{name:"TargetType",type:"String"},9157:{name:"TagTrackUID",type:"Uint"},9161:{name:"TagEditionUID",type:"Uint"},9156:{name:"TagChapterUID",type:"Uint"},9158:{name:"TagAttachmentUID",type:"Uint"},10184:{name:"SimpleTag",type:"Container"},1443:{name:"TagName",type:"String"},1146:{name:"TagLanguage",type:"String"},1156:{name:"TagDefault",type:"Uint"},1159:{name:"TagString",type:"String"},1157:{name:"TagBinary",type:"Binary"}};
function Pc(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function Qc(a,b){this.name=a||"Unknown";this.type=b||"Unknown"}Qc.prototype.j=function(){};Qc.prototype.m=function(){};function Rc(a,b){Qc.call(this,a,b||"Uint")}Pc(Rc,Qc);Rc.prototype.j=function(){this.data="";for(var a=0;a<this.source.length;a++){var b=this.source[a].toString(16);this.data+=1===b.length%2?"0"+b:b}};
Rc.prototype.m=function(){var a=this.data.length/2;this.source=new Uint8Array(a);for(var b=0;b<a;b++)this.source[b]=parseInt(this.data.substr(2*b,2),16)};Rc.prototype.L=function(){return parseInt(this.data,16)};Rc.prototype.H=function(a){a=a.toString(16);this.data=1===a.length%2?"0"+a:a;this.m()};function Sc(a,b){Qc.call(this,a,b||"Float")}Pc(Sc,Qc);Sc.prototype.j=function(){var a=this.source.reverse();this.data=(new (this.source&&4===this.source.length?Float32Array:Float64Array)(a.buffer))[0]};
Sc.prototype.m=function(){var a=new (this.source&&4===this.source.length?Float32Array:Float64Array)([this.data]);this.source=(new Uint8Array(a.buffer)).reverse()};Sc.prototype.L=function(){return this.data};Sc.prototype.H=function(a){this.data=a;this.m()};function Tc(a,b){Qc.call(this,a,b||"Container")}Pc(Tc,Qc);function Uc(a){var b=a.source[a.offset++],d=8-b.toString(2).length;b-=1<<7-d;for(var c=0;c<d;c++)b*=256,b+=a.source[a.offset++];return b}
Tc.prototype.j=function(){this.data=[];for(this.offset=0;this.offset<this.source.length;this.offset=b){var a=Uc(this);var b=Uc(this);b=Math.min(this.offset+b,this.source.length);var d=this.source.slice(this.offset,b),c=Oc[a]||{name:"Unknown",type:"Unknown"},k=Qc;switch(c.type){case "Container":k=Tc;break;case "Uint":k=Rc;break;case "Float":k=Sc}k=c=new k(c.name,c.type);k.source=d;k.j();this.data.push({id:a,$:a.toString(16),data:c})}};
function Vc(a,b,d){for(var c=1,k=128;b>=k&&8>c;c++,k*=128);if(!d)for(b=k+b,d=c-1;0<=d;d--)k=b%256,a.source[a.offset+d]=k,b=(b-k)/256;a.offset+=c}function Wc(a,b){for(var d=a.offset=0;d<a.data.length;d++){var c=a.data[d],k=c.data.source,l=k.length;Vc(a,c.id,b);Vc(a,l,b);b||a.source.set(k,a.offset);a.offset+=l}return a.offset}Tc.prototype.m=function(){var a=Wc(this,"draft");this.source=new Uint8Array(a);Wc(this,null)};
function Xc(a,b){for(var d=0;d<a.data.length;d++){var c=a.data[d];if(c.id===b)return c.data}return null}function Yc(a){Tc.call(this,"File","File");this.source=a;this.j()}Pc(Yc,Tc);
function Zc(a,b,d){d=d&&d.U;void 0===d?d=function(G){console.log(G)}:d||=function(){};var c=Xc(a,139690087);if(!c)return d("[fix-webm-duration] Segment section is missing"),!1;var k=Xc(c,88713574);if(!k)return d("[fix-webm-duration] Info section is missing"),!1;var l=Xc(k,710577);if(!l)return d("[fix-webm-duration] TimecodeScale section is missing"),!1;var t=Xc(k,1161);if(t)if(0>=t.L())d("[fix-webm-duration] Duration section is present, but the value is empty"),t.H(b);else return d("[fix-webm-duration] Duration section is present"),
!1;else d("[fix-webm-duration] Duration section is missing"),t=new Sc("Duration","Float"),t.H(b),k.data.push({id:1161,data:t});l.H(1E6);k.m();c.m();a.m();return!0}function Mc(a,b,d,c){try{var k=new FileReader;k.onloadend=function(){try{var l=new Yc(new Uint8Array(k.result));Zc(l,b,c)&&(a=new Blob([l.source.buffer],{type:a.type||"video/webm"}))}catch(t){}d(a)};k.readAsArrayBuffer(a)}catch(l){d(a)}};var $c;
(function(){function a(u){let f=B.get(u);"undefined"===typeof f&&(f=new Function("return "+u+";"),B.set(u,f));return f()}function b(u){let f={exports:null,B:null,I:null};d(u);c(u);k(u,f);l(u,f);u.teavmMath=Math;return{O(r){f.exports=r},Y(r){f.B=r},X(r){f.I=r}}}function d(u){u.teavmDate={currentTimeMillis:()=>(new Date).getTime(),dateToString:f=>(new Date(f)).toString(),getYear:f=>(new Date(f)).getFullYear(),setYear:(f,r)=>{f=new Date(f);f.setFullYear(r);return f.getTime()},getMonth:f=>(new Date(f)).getMonth(),setMonth:(f,
r)=>{f=new Date(f);f.setMonth(r);return f.getTime()},getDate:f=>(new Date(f)).getDate(),setDate:(f,r)=>{f=new Date(f);f.setDate(r);return f.getTime()},create:(f,r,w,p,D,g)=>(new Date(f,r,w,p,D,g)).getTime(),createFromUTC:(f,r,w,p,D,g)=>Date.UTC(f,r,w,p,D,g)}}function c(u){let f=[],r=[];u.teavmConsole={putcharStderr:function(w){10===w?(w=String.fromCharCode(...f),console.error(w),fa&&fa(w,!0),f.length=0):f.push(w)},putcharStdout:function(w){10===w?(w=String.fromCharCode(...r),console.log(w),fa&&fa(w,
!1),r.length=0):r.push(w)}}}function k(u,f){let r=new FinalizationRegistry(p=>{let D=f.exports["teavm.reportGarbageCollectedValue"];"undefined"!==typeof D&&f.I(function(){D(p.V,p.W)})}),w=new FinalizationRegistry(p=>{let D=f.exports["teavm.reportGarbageCollectedString"];"function"===typeof D&&f.I(function(){D(p)})});u.teavm={createWeakRef:(p,D,g)=>{null!==g&&r.register(p,{W:D,V:g});return new WeakRef(p)},deref:p=>p.deref(),createStringWeakRef:(p,D)=>{w.register(p,D);return new WeakRef(p)},stringDeref:p=>
p.deref(),takeStackTrace:()=>{var p=Error().stack;let D=[];for(let g of p.split("\n"))p=H.exec(g),null!==p&&2<=p.length&&D.push(parseInt(p[1],16));return{getStack:function(){let g;if(f.B)try{g=f.B(D)}catch(v){console.warn("Could not deobfuscate stack",v)}g||=D.map(v=>({className:"java.lang.Throwable$FakeClass",method:"fakeMethod",file:"Throwable.java",line:v}));return g}}},decorateException:p=>{new da(f,p)}}}function l(u,f){function r(n){return n}function w(n){var q=n.charAt(0);var F=""+(p(q)?q:"_");
for(q=1;q<n.length;++q){let T=n.charAt(q);var M=T;M=p(M)||"0"<=M&&"9">=M;F+=M?T:"_"}return F}function p(n){return"A"<=n&&"Z">=n||"a"<=n&&"z">=n||"_"===n||"$"===n}function D(n,q,F){null===n?(new Function("value",q+" = value;"))(F):n[q]=F}function g(n){f.exports["teavm.js.throwException"](W in n?n[W]:f.exports["teavm.js.wrapException"](n))}function v(n){a:{if(n instanceof WebAssembly.Exception){var q=f.exports["teavm.javaException"];var F=f.exports["teavm.getJsException"];if(n.is(q)){n=n.getArg(q,0);
q=f.exports["teavm.js.extractException"](n);if(null!==q){F=q;break a}F=F(n);"undefined"===typeof F&&(F=new da(f,n));break a}}F=n}throw F;}function y(n){var q=[];for(let F=0;F<n.length;++F)q.push("p"+F);q=0===q.length?"":q.join(", ");q=(new Function("rethrowJavaAsJs","fn",`return function(${q}) {\n`+"    try {\n"+`        return fn(${q});\n`+"    } catch (e) {\n        rethrowJavaAsJs(e);\n    }\n};"))(v,n);q.__impl=n;q.__rethrow=v;return q}function E(n,q){return(new Function("constructor",`return function ${n}(marker, javaObject) {\n`+
"    return constructor.call(this, marker, javaObject);\n}\n"))(q)}function L(n){try{return n()}catch(q){g(q)}}let X=Symbol("javaObject"),S=Symbol("functions"),Y=Symbol("functionOrigin"),Ga=Symbol("wrapperCallMarker"),bb=new WeakMap,Ba=new WeakMap,wa=new Map,Ha=new FinalizationRegistry(n=>wa.delete(n)),Qa=new WeakMap,ta=2463534242;u.teavmJso={emptyString:()=>"",stringFromCharCode:n=>String.fromCharCode(n),concatStrings:(n,q)=>n+q,stringLength:n=>n.length,charAt:(n,q)=>n.charCodeAt(q),emptyArray:()=>
[],appendToArray:(n,q)=>n.push(q),unwrapBoolean:n=>n?1:0,wrapBoolean:n=>!!n,getProperty:function(n,q){try{return null!==n?n[q]:a(q)}catch(F){g(F)}},setProperty:D,setPropertyPure:D,global:n=>{try{return a(n)}catch(q){g(q)}},createClass:(n,q,F)=>{n=w(n||"JavaObject");let M;M=null===q?function(ba){this[X]=ba;this[S]=null}:function(ba){q.call(this,ba)};let T=E(n,function(ba,ua){if(ba===Ga)M.call(this,ua);else{if(null===F)throw Error("This class can't be instantiated directly");try{return F.apply(null,
arguments)}catch(Ra){v(Ra)}}});T.prototype=Object.create(q||Object.prototype);T.prototype.constructor=T;n=E(n,function(ba){return T.call(this,Ga,ba)});n[Ga]=T;n.prototype=T.prototype;return n},exportClass:n=>n[Ga],defineMethod:(n,q,F)=>{let M=[];for(let T=1;T<F.length;++T)M.push("p"+T);n.prototype[q]=(new Function("rethrowJavaAsJs","fn",`return function(${0===M.length?"":M.join(", ")}) {\n`+"    try {\n"+`        return fn(${["this",M].join(", ")});\n`+"    } catch (e) {\n        rethrowJavaAsJs(e);\n    }\n};"))(v,
F)},defineStaticMethod:(n,q,F)=>{n[q]=y(F)},defineFunction:y,defineProperty:(n,q,F,M)=>{let T={get(){try{return F(this)}catch(ba){v(ba)}}};null!==M&&(T.set=function(ba){try{M(this,ba)}catch(ua){v(ua)}});Object.defineProperty(n.prototype,q,T)},defineStaticProperty:(n,q,F,M)=>{let T={get(){try{return F()}catch(ba){v(ba)}}};null!==M&&(T.set=function(ba){try{M(ba)}catch(ua){v(ua)}});Object.defineProperty(n,q,T)},javaObjectToJS:(n,q)=>{if(null===n)return null;var F=bb.get(n);if("undefined"!=typeof F&&
(F=F.deref(),"undefined"!==typeof F))return F;q=new q(n);bb.set(n,new WeakRef(q));return q},unwrapJavaObject:n=>n[X],asFunction:(n,q)=>{let F=n[S];null===F&&(F=Object.create(null),n[S]=F);let M=F[q];"function"!==typeof M&&(M=function(){return n[q].apply(n,arguments)},M[Y]=n,F[q]=M);return M},functionAsObject:(n,q)=>{let F=n[Y];if("undefined"!==typeof F){let M=F[S];if(void 0!==M&&M[q]===n)return F}return{[q]:function(...M){try{return n(...M)}catch(T){v(T)}}}},wrapObject:n=>{if(null===n)return null;
if("object"===typeof n||"function"===typeof n){var q=n[X];if("object"===typeof q)return q;q=Ba.get(n);if(void 0!==q&&(q=q.deref(),void 0!==q))return q;q=f.exports["teavm.jso.createWrapper"](n);Ba.set(n,new WeakRef(q));return q}q=wa.get(n);if(void 0!==q&&(q=q.deref(),void 0!==q))return q;q=f.exports["teavm.jso.createWrapper"](n);wa.set(n,new WeakRef(q));Ha.register(q,n);return q},isPrimitive:(n,q)=>typeof n===q,instanceOf:(n,q)=>n instanceof q,instanceOfOrNull:(n,q)=>null===n||n instanceof q,sameRef:(n,
q)=>n===q,hashCode:n=>{if("object"===typeof n||"function"===typeof n||"symbol"===typeof n){var q=Qa.get(n);if("number"===typeof q)return q;q=ta;q^=q<<13;q^=q>>>17;ta=q^=q<<5;Qa.set(n,q);return q}return"number"===typeof n?n|0:"bigint"===typeof n?BigInt.asIntN(32,n):"boolean"===typeof n?n?1:0:0},apply:(n,q,F)=>{try{return null===n?a(q)(...F):n[q](...F)}catch(M){g(M)}},concatArray:(n,q)=>n.concat(q),getJavaException:n=>n[W]};for(var ia of"wrapByte wrapShort wrapChar wrapInt wrapFloat wrapDouble unwrapByte unwrapShort unwrapChar unwrapInt unwrapFloat unwrapDouble".split(" "))u.teavmJso[ia]=
r;ia=[];for(let n=0;32>n;++n){let q=0===ia.length?"":ia.join(", "),F=[...ia,"body"].join(", ");u.teavmJso["createFunction"+n]=(new Function("wrapCallFromJavaToJs",...ia,"body",`return new Function('wrapCallFromJavaToJs', ${F}).bind(this, wrapCallFromJavaToJs);`)).bind(null,L);u.teavmJso["bindFunction"+n]=(M,...T)=>M.bind(null,...T);u.teavmJso["callFunction"+n]=(new Function("rethrowJsAsJava","fn",...ia,"try {\n"+`    return fn(${q});\n`+"} catch (e) {\n    rethrowJsAsJava(e);\n}")).bind(null,g);u.teavmJso["callMethod"+
n]=(new Function("rethrowJsAsJava","getGlobalName","instance","method",...ia,"try {\n     return instance !== null\n"+`        ? instance[method](${q})\n`+`        : getGlobalName(method)(${q});\n`+"} catch (e) {\n    rethrowJsAsJava(e);\n}")).bind(null,g,a);u.teavmJso["construct"+n]=(new Function("rethrowJsAsJava","constructor",...ia,"try {\n"+`    return new constructor(${q});\n`+"} catch (e) {\n    rethrowJsAsJava(e);\n}")).bind(null,g);u.teavmJso["arrayOf"+n]=new Function(...ia,"return ["+q+"]");
ia.push("p"+(n+1))}}async function t(u){try{const f={},r=b(f),w=u.path instanceof WebAssembly.Module?u.path:await WebAssembly.compileStreaming(fetch(u.path)),p=new WebAssembly.Instance(w,f);r.O(p.exports);return{module:w,instance:p}}catch(f){return console.warn("Could not load deobfuscator",f),null}}function G(u,f,r){let w=null,p=!1;return D=>{if(!p){p=!0;if(null!==f)try{w=r.exports.createFromExternalFile.value(f)}catch(g){console.warn("Could not load create deobfuscator",g)}if(null==w&&null!==u)try{w=
r.exports.createForModule.value(u)}catch(g){console.warn("Could not create deobfuscator from module data",g)}}return null!==w?w.deobfuscate(D):[]}}async function x(u,f){if(!f.enabled||"auto"!==u&&"external"!==u)return null;if(f.J instanceof ArrayBuffer)return new Int8Array(f.J);u=await fetch(f.J);return u.ok?new Int8Array(await u.arrayBuffer()):null}function z(u){const f=new ra;u.teavm.pollAsyncCallbacks=function(){for(var r;r=f.j();)r.fn()};return function(r){f.push({fn:r,_next:null})}}let B=new Map,
H=/.+:wasm-function\[[0-9]+]:0x([0-9a-f]+).*/,W=Symbol("javaException");class da extends Error{constructor(u,f){super();this.j=u;this[W]=f;u.exports["teavm.setJsException"](f,this)}get message(){var u=this.j.exports["teavm.exceptionMessage"];return"function"===typeof u&&(u=u(this[W]),null!=u)?u:"(could not fetch message)"}}$c={load:async function(u,f){f||={};var r=f.B||{};let [w,p,D]=await Promise.all([r.enabled?t(r):Promise.resolve(null),u instanceof WebAssembly.Module?Promise.resolve(u):WebAssembly.compileStreaming(fetch(u)),
x(r.T,r)]);r={};u=b(r);"undefined"!==typeof f.M&&f.M(r);u.X(z(r));f=await WebAssembly.instantiate(p,r);r={};u.O(f.exports);if(w){let g=G(null,D,w.instance);null!==g&&(u.Y(g),r.deobfuscator=g)}u={exports:r,instance:f,N:{P:p,S:w?w.module:null}};for(let g in f.exports){let v=f.exports[g];v instanceof WebAssembly.Global?Object.defineProperty(r,g,{get:()=>v.value}):"function"===typeof v&&(r[g]=v)}r.memory=f.exports["teavm.memory"];r.R=D;return u},Z:b,aa:function(u){return new Proxy(u,{get(f,r){return new WebAssembly.Global({value:"externref",
mutable:!1},f[r])}})}}})();async function ad(){try{Error.stackTraceLimit=1024;O=self.__eaglercraftXLoaderContext.getEaglercraftXOpts();Ta=self.__eaglercraftXLoaderContext.getEagRuntimeJSURL();const a=self.__eaglercraftXLoaderContext.getClassesWASMURL(),b=self.__eaglercraftXLoaderContext.getClassesDeobfWASMURL(),d=self.__eaglercraftXLoaderContext.getClassesTEADBGURL();Na=self.__eaglercraftXLoaderContext.getEPKFiles();Ua=self.__eaglercraftXLoaderContext.getRootElement();self.__eaglercraftXLoaderContext.getImageURL(0);Oa=self.__eaglercraftXLoaderContext.getImageURL(1);
Pa=self.__eaglercraftXLoaderContext.getImageURL(2);Sa=self.__eaglercraftXLoaderContext.getImageURL(3);const c=self.__eaglercraftXLoaderContext.getMainArgs();delete self.__eaglercraftXLoaderContext;if("_worker_process_"!==c[0]){if(!await Kb())return}else ea="worker",await Yb();e("Loading EaglercraftX WASM GC binary...");const k=await $c.load(a,{B:{enabled:!0,path:b,T:"external",J:d},M:function(l){l.WASMGCBufferAllocator=sa;l.platformApplication=I;l.platformAssets=va;l.platformAudio=xa;l.platformFilesystem=
ya;l.platformInput=J;l.platformNetworking=za;l.platformOpenGL=K;l.platformRuntime=Aa;l.platformScreenRecord=Ca;l.platformVoiceClient=Da;l.platformWebRTC=N;l.platformWebView=Ea;l.clientPlatformSingleplayer=Fa;l.serverPlatformSingleplayer=Ia;l.teavm.notifyHeapResized=function(){$b(k.exports.memory)}}});Ja=k.N.P;Ka=k.N.S;La=k.exports.R;$b(k.exports.memory);Ma=k.exports.deobfuscator;e("Calling entry point with args: {}",JSON.stringify(c));try{await WebAssembly.promising(k.exports.main.__impl)(c)}catch(l){k.exports.main.__rethrow(l)}finally{ka("Main function has returned!")}}catch(a){cc(a)}}
"object"===typeof self.__eaglercraftXLoaderContext?self.__eaglercraftXLoaderContext.runMain(ad):console.error("???");}).call(this);
